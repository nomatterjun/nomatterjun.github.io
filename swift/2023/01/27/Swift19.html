<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<h1 id="rxflow">RxFlow</h1>

<p>Favor í”„ë¡œì íŠ¸ëŠ” ReactorKitì„ ì‚¬ìš©í•˜ì—¬ MVVM-CíŒ¨í„´ì— RxSwiftë¥¼ ì ê·¹ì ìœ¼ë¡œ í™œìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>

<p>í•˜ì§€ë§Œ ì €í¬ í”„ë¡œì íŠ¸ì—ì„œ Reactiveí•˜ì§€ ëª»í•œ ë¶€ë¶„ì´ í•˜ë‚˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>

<p>ë°”ë¡œ Coordinator ë¶€ë¶„ì¸ë°ìš”..</p>

<p>í•˜ìœ„ Coordinatorë¥¼ ì¢…ë£Œí•˜ê¸° ìœ„í•´ì„œëŠ” ìƒìœ„ Coordinatorì— ì ‘ê·¼í•´ì•¼ë§Œ í•˜ëŠ” í˜„ìƒì„ ë°œê²¬í—€ìŠµë‹ˆë‹¤.</p>

<p>ë°”ë¡œ ì•„ë˜ ì½”ë“œì²˜ëŸ¼ìš”..</p>

<pre><code class="language-Swift">self.coordinator.parentCoordinator?.finish(childCoordinator: self.coordinator)
</code></pre>

<p>í•œëˆˆì— ë´ë„ êµ‰ì¥íˆ ê¹”ë”í•´ë³´ì´ì§€ ì•ŠìŠµë‹ˆë‹¤. ğŸ˜µ</p>

<p><code class="language-plaintext highlighter-rouge">í˜„ì¬ ì½”ë””ë„¤ì´í„° â¡ï¸ ìƒìœ„ ì½”ë””ë„¤ì´í„°</code>ì— ì ‘ê·¼ì„ í•œ ë’¤ ë‹¤ì‹œ <code class="language-plaintext highlighter-rouge">í˜„ì¬ ì½”ë””ë„¤ì´í„°ë¥¼ ì¢…ë£Œí•˜ëŠ” ë©”ì„œë“œë¥¼ ì‹¤í–‰</code>í•˜ëŠ” ê²ƒì€ êµ‰ì¥íˆ ì¢‹ì§€ ì•Šì€ ì ‘ê·¼ì´ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.</p>

<p>ë•Œë¬¸ì— ë‘ ê°€ì§€ ë°©ë²•ì„ ê³ ì•ˆí•´ë³´ì•˜ëŠ”ë°ìš”.</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">delegate</code> íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ í•˜ìœ„ ì½”ë””ë„¤ì´í„°ì—ì„œ ì§ì ‘ì ìœ¼ë¡œ ìƒìœ„ ì½”ë””ë„¤ì´í„°ì— ì ‘ê·¼í•˜ëŠ” ê²ƒì„ ë°©ì§€</li>
</ul>

<pre><code class="language-Swift">extension AppCoordinator: CoordinatorFinishDelegate {
  func coordinatorDidFinish(childCoordinator: some Coordinator) {
    self.finish(childCoordinator: childCoordinator)
    
    self.navigationController.viewControllers.removeAll()
    
    switch childCoordinator.self {
    case is AuthCoordinator:
      self.showTabBarFlow()
    case is TabBarCoordinator:
      self.showAuthFlow()
    default:
      break
    }
  }
}
</code></pre>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">override</code>ë¥¼ í™œìš©í•˜ì—¬ ì¶”ê°€ ë¡œì§ êµ¬í˜„ ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼</li>
</ul>

<pre><code class="language-Swift">  override func finish(childCoordinator: some Coordinator) {
    super.finish(childCoordinator: childCoordinator)
    
    self.navigationController.viewControllers.removeAll()
    
    switch childCoordinator.self {
    case is AuthCoordinator:
      self.showTabBarFlow()
    case is TabBarCoordinator:
      self.showAuthFlow()
    default:
      break
    }
  }
</code></pre>

<p>ì‚¬ì‹¤ ì™„ë²½í•˜ê²Œ ë™ì¼í•œ ë¡œì§ì´ì§€ë§Œ ì ‘ê·¼ ë°©ë²•ì˜ ì°¨ì´ë¥¼ ê°–ê³  ìˆê³ , ì–´ë–¤ ë°©ì‹ì´ ë” ë‚˜ì„ê¹Œë¥¼ ê³ ë¯¼í•˜ë˜ ì¤‘ì—</p>

<p><code class="language-plaintext highlighter-rouge">delegate</code> íŒ¨í„´ì„ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ â€œìœ„ì„â€í•œë‹¤ëŠ” ë¡œì§ ì¸¡ë©´ì—ì„œëŠ” ì§ê´€ì ì´ì§€ë§Œ ì½”ë“œ ê°€ì‹œì„± ì¸¡ë©´ì—ì„œëŠ” ë³µì¡í•˜ë‹¤ëŠ” ì˜ê²¬ìœ¼ë¡œ ê·€ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">delegate</code> íŒ¨í„´ì„ ì–´ë–»ê²Œ í•˜ë©´ ë” ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆì„ê¹Œë¥¼ ê³ ë¯¼í•˜ë˜ ì¤‘ì— <code class="language-plaintext highlighter-rouge">rx</code>ë¥¼ í™œìš©í•˜ë©´ ë˜ì§€ ì•Šì„ê¹Œë¼ëŠ” ìƒê°ì— ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì°¾ì•„ë³´ê²Œ ë˜ì—ˆê³ , <code class="language-plaintext highlighter-rouge">RxFlow</code>ë¥¼ ë°œê²¬í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤!</p>

<h2 id="-rxflowë€">â“ RxFlowë€</h2>

<p>ê³µì‹ GitHub ì„¤ëª…ì€ <code class="language-plaintext highlighter-rouge">RxFlow</code>ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>

<blockquote>
  <p>RxFlowëŠ” <code class="language-plaintext highlighter-rouge">Reactive Flow</code>ë¥¼ í™œìš©í•˜ì—¬ Coordinator íŒ¨í„´ì„ êµ¬í˜„í•œ iOS ì•±ì„ ìœ„í•œ navigation ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.</p>
</blockquote>

<p>ìš”ì•½í•˜ë©´ â€œì½”ë””ë„¤ì´í„° íŒ¨í„´ì— <code class="language-plaintext highlighter-rouge">rx</code>ë¥¼ ì ‘ëª©ì‹œì¼°ë‹¤.â€ ì •ë„ê² ë„¤ìš”.</p>

<p><code class="language-plaintext highlighter-rouge">RxFlow</code>ëŠ” Coordinator íŒ¨í„´ì„ Reactiveí™” ì‹œí‚¨ ê²ƒì´ê¸° ë•Œë¬¸ì— Coordinator íŒ¨í„´ì˜ ì¥ë‹¨ì ì„ ë¨¼ì € ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>

<h3 id="-ì¥ì ">ğŸ˜Š ì¥ì </h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">UIViewController</code>ì—ì„œ ë„¤ë¹„ê²Œì´ì…˜ ì½”ë“œë¥¼ ë¶„ë¦¬í•œë‹¤.</li>
  <li>
<code class="language-plaintext highlighter-rouge">UIViewController</code>ë¥¼ ë‹¤ë¥¸ í™”ë©´ ì „í™˜ ìƒí™©ì—ì„œë„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>
  <li>ì˜ì¡´ì„± ì£¼ì…ì„ ì‰½ê²Œ ì´ë£° ìˆ˜ ìˆë‹¤.</li>
</ul>

<h3 id="-ë‹¨ì ">ğŸ˜­ ë‹¨ì </h3>
<ul>
  <li>ì½”ë””ë„¤ì´í„° íŒ¨í„´ì˜ ê¸°ë³¸ì ì¸ ë¡œì§ë“¤ì€ ì•±ì„ bootstrapí•  ë•Œë§ˆë‹¤ ì‘ì„±í•´ì£¼ì–´ì•¼ í•œë‹¤.</li>
  <li>ì½”ë””ë„¤ì´í„° íŒ¨í„´ ìŠ¤íƒì˜ êµë¥˜ ê³¼ì •ì—ì„œ boilerplate ì½”ë“œê°€ ë§ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</li>
</ul>

<p>ê·¸ë ‡ë‹¤ë©´ <code class="language-plaintext highlighter-rouge">RxFlow</code>ëŠ” ì–´ë–¤ ë°œì „ì„ ì´ë£¨ì—ˆë‹¤ê³  ì£¼ì¥í•˜ê³  ìˆì„ê¹Œìš”?</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Flows</code>ë¥¼ í™œìš©í•˜ì—¬ ë„¤ë¹„ê²Œì´ì…˜ì„ ì¢€ ë” ëª…í™•í•˜ê²Œ ë°œì „ì‹œì¼°ë‹¤.</li>
  <li>
<code class="language-plaintext highlighter-rouge">FlowCoordinator</code>ë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ì—¬ <code class="language-plaintext highlighter-rouge">Flows</code> ì‚¬ì´ì˜ ë„¤ë¹„ê²Œì´ì…˜ì„ ì œì–´í•  ìˆ˜ ìˆë‹¤.</li>
  <li>ë„¤ë¹„ê²Œì´ì…˜ ì•¡ì…˜ë“¤ì´ Reactiveí•˜ê²Œ ì´ë£¨ì–´ì§„ë‹¤.</li>
</ul>

<p>ê·¸ë¦¬ê³  ì•„ë˜ëŠ” <code class="language-plaintext highlighter-rouge">RxFlow</code>ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ ì•Œì•„ë‘ì–´ì•¼ í•  6ê°€ì§€ ìš©ì–´ë“¤ì…ë‹ˆë‹¤.</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Flow</code>: ê°ê°ì˜ <code class="language-plaintext highlighter-rouge">Flow</code>ëŠ” ì•±ì˜ <strong>ë„¤ë¹„ê²Œì´ì…˜ ê³µê°„</strong>ë“¤ì„ ì •ì˜í•©ë‹ˆë‹¤. ì´ ê³µê°„ì€ ë„¤ë¹„ê²Œì´ì…˜ <strong>ì•¡ì…˜ë“¤ì´ ì„ ì–¸ë˜ëŠ” ê³³</strong>ì…ë‹ˆë‹¤.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Step</code>: <code class="language-plaintext highlighter-rouge">Step</code>ì€ ë„¤ë¹„ê²Œì´ì…˜ê¹Œì§€ ì´ì–´ì§ˆ ìˆ˜ ìˆëŠ” <strong>stateë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•œ ë°©ë²•</strong>ì…ë‹ˆë‹¤. <strong><code class="language-plaintext highlighter-rouge">Flow</code>ì™€ <code class="language-plaintext highlighter-rouge">Step</code>ì„ ì¡°í•©</strong>í•˜ë©´ <strong>ê°€ëŠ¥í•œ ëª¨ë“  ë„¤ë¹„ê²Œì´ì…˜ ì•¡ì…˜ì„ ì„¤ëª…</strong>í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">Step</code>ì€ (<code class="language-plaintext highlighter-rouge">id</code>ë‚˜ <code class="language-plaintext highlighter-rouge">URL</code> ê°™ì€) ë‚´ë¶€ì ì¸ ê°’ë“¤ì„ ì§€ë‹ˆê³  ìˆì„ ìˆ˜ë„ ìˆì–´ ì´ ê°’ë“¤ì„ <code class="language-plaintext highlighter-rouge">Flow</code>ì— ì„ ì–¸ë˜ì–´ ìˆëŠ” í™”ë©´ë“¤ì— ì „ë‹¬í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Stepper</code>: <strong><code class="language-plaintext highlighter-rouge">Flow</code> ì•ˆì—ì„œ <code class="language-plaintext highlighter-rouge">Step</code>ì„ ë°œìƒ</strong>ì‹œí‚¬ ìˆ˜ ìˆë‹¤ë©´, ê·¸ ì–´ë–¤ ê²ƒë„ <code class="language-plaintext highlighter-rouge">Stepper</code>ë¼ê³  ë¶ˆë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Presentable</code>: <strong>Present ë  ìˆ˜ ìˆëŠ” ì–´ë–¤ ê²ƒ</strong>ì„ ì¶”ìƒì ìœ¼ë¡œ í‘œí˜„í•œ ê°œë…ì…ë‹ˆë‹¤. (ê¸°ë³¸ì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">UIViewController</code>ì™€ <code class="language-plaintext highlighter-rouge">Flow</code>ê°€ <code class="language-plaintext highlighter-rouge">Presentable</code>í•œ ê°ì²´ì…ë‹ˆë‹¤.)</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">FlowContributor</code>: ì–´ë–¤ ê²ƒë“¤ì´ <code class="language-plaintext highlighter-rouge">Flow</code> ì•ˆì—ì„œ ìƒˆë¡œìš´ <code class="language-plaintext highlighter-rouge">Step</code>ì„ ë§Œë“¤ì–´ë‚¼ ìˆ˜ ìˆì„ì§€ë¥¼ <code class="language-plaintext highlighter-rouge">FlowCoordinator</code>ì—ê²Œ ì•Œë ¤ì£¼ëŠ” ê°„ë‹¨í•œ ë°ì´í„° êµ¬ì¡°ì…ë‹ˆë‹¤.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">FlowCoordinator</code>: ê°œë°œìê°€ ì ì ˆí•œ <code class="language-plaintext highlighter-rouge">Flow</code>ì™€ <code class="language-plaintext highlighter-rouge">Step</code>ì„ ì¡°í•©í•˜ì—¬ ê°€ëŠ¥í•œ ë„¤ë¹„ê²Œì´ì…˜ì„ ì •ì˜í•˜ë©´, <code class="language-plaintext highlighter-rouge">FlowCoordinator</code>ëŠ” ì•±ì˜ ëª¨ë“  ë„¤ë¹„ê²Œì´ì…˜ì„ ì œì–´í•˜ê¸° ìœ„í•´ ì´ ì¡°í•©ë“¤ì„ ì„ìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">FlowCoordinator</code>ëŠ” <code class="language-plaintext highlighter-rouge">RxFlow</code>ì— ì˜í•´ ì œê³µë˜ì–´ ê°œë°œìê°€ ì§ì ‘ êµ¬í˜„í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.</p>
  </li>
</ul>

<h2 id="ì‚¬ìš©-ì˜ˆì‹œ">ì‚¬ìš© ì˜ˆì‹œ</h2>

<p><img src="https://raw.githubusercontent.com/RxSwiftCommunity/RxFlow/develop/Resources/RxFlow.gif"></p>

<p>ê³µì‹ ë¬¸ì„œëŠ” ìœ„ì™€ ê°™ì€ ì˜í™” ì •ë³´ì•±ì„ ì˜ˆì‹œë¡œ ë“¤ì–´ ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>

<p>í•˜ë‚˜ì”© ì‚´í´ë³¼ê²Œìš”..! ğŸ˜‰</p>

<h3 id="step-ì •ì˜">Step ì •ì˜</h3>

<p>ìš°ì„  <code class="language-plaintext highlighter-rouge">Step</code>ì„ ì •ì˜í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.</p>

<p>í•œ ê°€ì§€ ì£¼ì˜í•  ì ì€ <code class="language-plaintext highlighter-rouge">Step</code>ì€ ì•±ì˜ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ìš”ì†Œì´ê¸° ë•Œë¬¸ì— ì–´ë””ë¡œ navigationì´ ì´ë£¨ì–´ì§ˆ ì§€ì™€ ê°™ì€ <strong>íŠ¹ì •ì ì¸ ìš”ì†Œë“¤ì€ <code class="language-plaintext highlighter-rouge">Step</code>ì´ ì•„ë‹ˆë¼ <code class="language-plaintext highlighter-rouge">Flow</code>ì—ì„œ</strong> ì •í•´ì¤˜ì•¼ í•œë‹¤ê³  í•©ë‹ˆë‹¤.</p>

<p>ì˜ˆë¥¼ ë“¤ì–´ <code class="language-plaintext highlighter-rouge">showMovieDetail(withID: Int)</code>ëŠ” ì˜í™”ë¥¼ ì„ íƒí–ˆì„ ë•Œ ì˜í™”ì˜ ì„¸ë¶€ ì •ë³´ë¥¼ ë³´ì—¬ì£¼ëŠ” ë§¤ìš° íŠ¹ì •ëœ ì¼€ì´ìŠ¤ì´ê¸° ë•Œë¬¸ì— ë°”ëŒì§í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>

<p>ëŒ€ì‹  <code class="language-plaintext highlighter-rouge">movieIsPicked(withID: Int)</code>ì™€ ê°™ì´ ì¡°ê¸ˆ ë” <strong>ë…ë¦½ì ì¸ ì¼€ì´ìŠ¤</strong>ë¥¼ ì¶”ê°€í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ì´ëŸ° ì‹ìœ¼ë¡œ ì •ì˜í•´ì£¼ë©´ ì˜í™”ê°€ ì„ íƒëì„ ë•Œ ì˜í™”ì˜ ì„¸ë¶€ ì •ë³´ í™”ë©´ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒ ë§ê³ ë„ ë‹¤ë¥¸ ì¡°ê±´ì—ì„œ ë‹¤ë¥¸ ì•¡ì…˜ì„ ì¶”ê°€í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>ì•„ë˜ì™€ ê°™ì´ <code class="language-plaintext highlighter-rouge">enum</code> íƒ€ì…ìœ¼ë¡œ ì •ì˜í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>

<pre><code class="language-Swift">enum DemoStep: Step {
	// Login
	case loginIsRequired
	case userIsLoggedIn

	// Onboarding
	case onboardingIsRequired
	case onboardingIsComplete

	// Home
	case dashboardIsRequired

	// Movies
	case moviesAreRequired
	case movieIsPicked(withID: Int)
	case castIsPicked(withID: Int)

	// Settings
	case settingsAreRequired
	case settingsAreComplete
}
</code></pre>

<h3 id="flow-ì •ì˜">Flow ì •ì˜</h3>

<p><code class="language-plaintext highlighter-rouge">Flow</code> ì •ì˜ëŠ” ë‘ ê°€ì§€ë¥¼ í•„ìˆ˜ì ìœ¼ë¡œ í•´ì¤˜ì•¼í•©ë‹ˆë‹¤.</p>

<ul>
  <li>ë„¤ë¹„ê²Œì´ì…˜ì˜ ê·¼ê°„ì´ ë˜ëŠ” root <code class="language-plaintext highlighter-rouge">Presentable</code>ì„ ì„ ì–¸í•´ì¤ë‹ˆë‹¤.</li>
  <li>
<code class="language-plaintext highlighter-rouge">navigate(to:)</code> ë©”ì„œë“œë¥¼ êµ¬í˜„í•¨ìœ¼ë¡œì„œ <code class="language-plaintext highlighter-rouge">Step</code>ì„ ë„¤ë¹„ê²Œì´ì…˜ ì•¡ì…˜ìœ¼ë¡œ ë³€í™˜í•´ì£¼ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">navigate(to:)</code> ë©”ì„œë“œëŠ” <code class="language-plaintext highlighter-rouge">FlowContributos</code>ë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">.one(flowContributor: .contribute(withNextPresentable: viewController, withNextStepper: viewController.viewModel))</code>
ì˜ í˜•íƒœë¡œ ë¦¬í„´ì„ í•˜ë©´ ë˜ëŠ”ë°ìš”.. ê° íŒŒë¼ë¯¸í„°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">viewController</code>: ëª¨ë‘ê°€ ì•„ëŠ”ë°”ì™€ ê°™ì´ <code class="language-plaintext highlighter-rouge">Presentable</code>ì´ê³ , LifeCycleì— ë”°ë¼ ì—°ê²°ëœ <code class="language-plaintext highlighter-rouge">Stepper</code>(<code class="language-plaintext highlighter-rouge">ViewModel</code>)ê°€ <code class="language-plaintext highlighter-rouge">Step</code>ì„ emití•˜ëŠ” ê²ƒì— ì˜í–¥ì„ ì¤ë‹ˆë‹¤.
    <ul>
      <li>ì˜ˆë¥¼ ë“¤ì–´ <code class="language-plaintext highlighter-rouge">Presentable</code>ì´ hidden(presentë˜ì§€ ì•Šì€ ìƒí™©)ì¼ ê²½ìš°, <code class="language-plaintext highlighter-rouge">Stepper</code>ê°€ <code class="language-plaintext highlighter-rouge">Step</code>ì„ emití•œë‹¤ê³  í•´ë„ í•´ë‹¹ emitì€ íš¨ë ¥ì´ ì—†ìŠµë‹ˆë‹¤.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">viewModel</code>: <code class="language-plaintext highlighter-rouge">Stepper</code>ë¡œì„œ ì—°ê²°ëœ <code class="language-plaintext highlighter-rouge">Presentable</code>ì˜ LifeCycleì— ì˜í–¥ì„ ë°›ìœ¼ë©°, <code class="language-plaintext highlighter-rouge">Step</code>ì„ emití•¨ìœ¼ë¡œì„œ <code class="language-plaintext highlighter-rouge">Flow</code>ì•ˆì—ì„œ ë„¤ë¹„ê²Œì´ì…˜ì— ê¸°ì—¬í•©ë‹ˆë‹¤.</li>
</ul>

<p>ë¶€ê°€ì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">Flow</code>ëŠ” View Controllerë¥¼ instantiate í•´ì¤„ ë•Œ ì´ë£¨ì–´ì§€ëŠ” ì˜ì¡´ì„± ì£¼ì…ì— ì´ìš©ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>

<pre><code class="language-Swift">class WatchedFlow: Flow {
	var root: Presentable {
		return self.rootViewController
	}

	private let rootViewController = UINavigationController()
	private let services: AppServices

	init(withServices services: AppServices) {
		self.services = services
	}

	func navigate(to step: Step) -&gt; FlowContributors {
		guard let step = step as? DemoStep else { return .none }

		switch step {
		case .moviesAreRequired:
			return self.navigateToMovieListScreen()
		case .movieIsPicked(let movieID):
			return self.navigateToMovieDetailScreen(with: movieID)
		case .castIsPicked(let castID):
			return self.navigateToCastDetailScreen(with: castID)
		default:
			return .none
		}
	}
}

private extension WatchedFlow {

	func navigateToMovieListScreen() -&gt; FlowContributors {
		let viewController = WatchedViewController.instantiate(withViewModel: WatchedViewModel(), andServices: self.services)
		viewController.title = "Watched"

		self.rootViewController.pushViewController(viewController, animated: true)
		return .one(flowContributor: .contribute(withNextPresentable: viewController, withNextStepper: viewController.viewModel))
	}

	func navigateToMovieDetailScreen(with movieID: Int) -&gt; FlowContributors {
		// ...
	}

	func navigateToCastDetailScreen(with castID: Int) -&gt; FlowContributors {
		// ...
	}
}
</code></pre>

<h3 id="stepper-ì •ì˜">Stepper ì •ì˜</h3>

<p><code class="language-plaintext highlighter-rouge">Stepper</code>ëŠ” <code class="language-plaintext highlighter-rouge">protocol</code>ì´ê¸° ë•Œë¬¸ì— ì–´ë–¤ ê²ƒì´ë“  ë  ìˆ˜ ìˆë‹¤ê³  í•©ë‹ˆë‹¤. ViewControllerê°€ ë  ìˆ˜ë„ ìˆê³ , ViewModelì´ ë  ìˆ˜ë„ ìˆì£ .</p>

<p>í•˜ì§€ë§Œ ViewModel ê°™ì´ ë¡œì§ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆëŠ” ê³³ì— ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì ì ˆí•©ë‹ˆë‹¤.</p>

<p>RxFlowëŠ” <code class="language-plaintext highlighter-rouge">OneStepper</code>ë¼ëŠ” <code class="language-plaintext highlighter-rouge">Stepper</code> í´ë˜ìŠ¤ë¥¼ ê¸°ë³¸ìœ¼ë¡œ êµ¬í˜„í•˜ì—¬ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ ìƒê²¼ëŠ”ë°ìš”..</p>

<pre><code class="language-Swift">public class OneStepper: Stepper {
	public let steps = PublishRelay&lt;Step&gt;()
	private let singleStep: Step

	public init(withSingleStep singleStep: Step) {
		self.singleStep = singleStep
	}

	public var initialStep: Step {
		return self.singleStep
	}
}
</code></pre>

<p>ì´ <code class="language-plaintext highlighter-rouge">OneStepper</code>ëŠ” ì´ˆê¸°í™”ì™€ ë™ì‹œì— ì˜¤ì§ í•˜ë‚˜ì˜ <code class="language-plaintext highlighter-rouge">Step</code>ì„ emití•˜ëŠ” ê²ƒì„ ìœ ì¼í•œ ë¡œì§ìœ¼ë¡œ ê°–ëŠ” <code class="language-plaintext highlighter-rouge">Stepper</code>ì…ë‹ˆë‹¤.</p>

<p>ìƒˆë¡œìš´ <code class="language-plaintext highlighter-rouge">Flow</code>ë¥¼ ìƒì„±í•˜ê³  ì²« <code class="language-plaintext highlighter-rouge">Step</code>ì„ ì‹¤í–‰í•  ë•Œ ìœ ìš©í•˜ë‹¤ê³  í•©ë‹ˆë‹¤.</p>

<p>ì•„ë˜ <code class="language-plaintext highlighter-rouge">Stepper</code>ëŠ” <code class="language-plaintext highlighter-rouge">pick(movieID:)</code> ë©”ì„œë“œê°€ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ <code class="language-plaintext highlighter-rouge">DemoStep.movieIsPicked(withID)</code>ë¥¼ emití•©ë‹ˆë‹¤.</p>

<p>í•´ë‹¹ <code class="language-plaintext highlighter-rouge">Step</code>ì´ emitë˜ë©´, ìœ„ì˜ <code class="language-plaintext highlighter-rouge">WatchedFlow</code>ì—ì„œ <code class="language-plaintext highlighter-rouge">navigate(to step:)</code> ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ê³ , ê²°ê³¼ì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">navigateToMovieDetailScreen(withmovieID: Int)</code> ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ê²Œ ë©ë‹ˆë‹¤.</p>

<pre><code class="language-Swift">class WatchedViewModel: Stepper {
	let movies: [MovieViewModel]
	let steps = PublishRelay&lt;Step&gt;()

	init(with service: MovieService) {
		self.movies = service.watchedMovies().map({ movie -&gt; MovieViewModel in
			return MovieViewModel(id: movie.id, title: movie.title, image: movie.image)
		})
	}

	// ì˜í™”ê°€ pick ëì„ ë•Œ ìƒˆë¡œìš´ Stepì„ emití•©ë‹ˆë‹¤.
	// ì´ emitì€ WatchedFlowì—ì„œ ë„¤ë¹„ê²Œì´ì…˜ ì•¡ì…˜ì„ ì´‰ë°œí•©ë‹ˆë‹¤.
	public func pick(movieID: Int) {
		self.steps.accept(DemoStep.movieIsPicked(withID: movieID))
	}
}
</code></pre>
</body></html>
