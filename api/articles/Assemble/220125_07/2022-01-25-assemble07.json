{"title":"7)ğŸ“±iOSì•±ê°œë°œ - API Gatewayë¡œ DBì— ì •ë³´ ì…ë ¥/ìˆ˜ì •í•˜ê¸°","uid":"63d243280a5706ad4c80cf0178f771fe","slug":"Assemble/220125_07/2022-01-25-assemble07","date":"2022-01-24T15:00:00.000Z","updated":"2023-03-31T10:38:30.780Z","comments":true,"path":"api/articles/Assemble/220125_07/2022-01-25-assemble07.json","keywords":null,"cover":[],"content":"<p>DB í‹€ì´ ì–´ëŠì •ë„ ë§ì¶°ì¡Œìœ¼ë‹ˆ ì‹¤ì œë¡œ ë°ì´í„°ë¥¼ ë„£ì–´ë³´ë ¤ê³  í•©ë‹ˆë‹¤. ì´ì „ì— ë§Œë“¤ì–´ë‘ì—ˆë˜ Lambda í•¨ìˆ˜ì™€ API Gatewayë¥¼ ì‚¬ìš©í•˜ë©´ RESTfulí•˜ê²Œ ë°ì´í„°ë¥¼ ì…ë ¥í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<h3 id=\"API-Gateway\"><a href=\"#API-Gateway\" class=\"headerlink\" title=\"API Gateway\"></a>API Gateway</h3><img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220125_07/cap01.png?raw=true\" alt=\"api gateway\" width=\"400\">\n\n<p>ìœ„ì™€ ê°™ì´ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•´ì£¼ê³  PUT ë©”ì„œë“œë¥¼ ì¶”ê°€í•´ì£¼ì—ˆìŠµë‹ˆë‹¤. API Gatewayì—ì„œ ì§€ì›í•˜ëŠ” ë©”ì„œë“œëŠ” ì´ 6ê°€ì§€ì¸ë°, HTTP ë©”ì„œë“œì™€ ë™ì¼í•œ ì—­í• ì„ í•©ë‹ˆë‹¤.</p>\n<hr>\n<h4 id=\"HTTP-Method\"><a href=\"#HTTP-Method\" class=\"headerlink\" title=\"HTTP Method\"></a>HTTP Method</h4><h5 id=\"1-ANY\"><a href=\"#1-ANY\" class=\"headerlink\" title=\"1. ANY\"></a>1. ANY</h5><p>ì•„ë˜ ë‹¤ì„¯ ë©”ì„œë“œ ì¤‘ ì í•©í•œ ë©”ì„œë“œë¥¼ ê³¨ë¼ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>\n<h5 id=\"2-GET\"><a href=\"#2-GET\" class=\"headerlink\" title=\"2. GET\"></a>2. GET</h5><p>ë°ì´í„°ë¥¼ ì¡°íšŒ&#x2F;ê²€ìƒ‰í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. ìš”ì²­ì‹œì— body ê°’ê³¼ content-type ì—†ì´ urlì— íŒŒë¼ë¯¸í„°ë§Œ ì…ë ¥í•˜ì—¬ ì‚¬ìš©ë©ë‹ˆë‹¤ë‹¤. ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ë©´ 200(OK) ë©”ì‹œì§€ì™€ í•¨ê»˜ body ê°’ì— ë°ì´í„°ê°€ ì €ì¥ë˜ì–´ ëŒì•„ì˜µë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">GET &#x2F;films&#x2F;2024012802<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h5 id=\"3-POST\"><a href=\"#3-POST\" class=\"headerlink\" title=\"3. POST\"></a>3. POST</h5><p>ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ìƒì„±í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. ìš”ì²­ì‹œì— body ê°’ê³¼ content-typeì„ í•„ìš”ë¡œ í•˜ê³ , ìƒì„±í• ë•Œë§Œ ì‚¬ìš©ë˜ê¸° ë•Œë¬¸ì— ì´ë¯¸ ì¤‘ë³µëœ ë°ì´í„°ê°€ ìˆë”ë¼ë„ ë¬´ì¡°ê±´ ìƒì„±ì„ ì‹œë„í•©ë‹ˆë‹¤. urlì— ëª¨ë“  ë°ì´í„°ë¥¼ ë„£ëŠ” ê²ƒì€ ë„ˆë¬´ë‚˜ ë¶ˆí¸í•˜ê¸° ë•Œë¬¸ì— bodyì— ë°ì´í„°ë¥¼ ë„£ì–´ ë³´ëƒ…ë‹ˆë‹¤. ì„±ê³µì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ìƒì„±í•˜ë©´ 201(created) ë©”ì‹œì§€ì™€ í•¨ê»˜ body ê°’ì— ìƒì„±ëœ ê°’ì´ ì €ì¥ë˜ì–´ ëŒì•„ì˜µë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">POST &#x2F;films\nbody: &#123;fID: 2023042403, fNM: &quot;ì˜í™”&quot; ... &#125;\ncontent-type: &quot;application&#x2F;json&quot;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h5 id=\"4-PUT\"><a href=\"#4-PUT\" class=\"headerlink\" title=\"4. PUT\"></a>4. PUT</h5><p>ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸&#x2F;ìƒì„±í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. POSTì™€ ë¹„ìŠ·í•˜ì§€ë§Œ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë°ì´í„°ì— ëŒ€í•´ì„œëŠ” ì—…ë°ì´íŠ¸ê°€ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. (idempotent)</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">PUT &#x2F;films&#x2F;2023042403\nbody: &#123;fNM: &quot;ì˜í™”2&quot; ... &#125;\ncontent-type: &quot;application&#x2F;json&quot;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h5 id=\"5-DELETE\"><a href=\"#5-DELETE\" class=\"headerlink\" title=\"5. DELETE\"></a>5. DELETE</h5><p>ì¡´ì¬í•˜ëŠ” ë°ì´í„°ë¥¼ ì‚­ì œí•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. GETê³¼ ë¹„ìŠ·í•˜ê²Œ urlì„ í†µí•´ì„œ ì‚­ì œí•  ë°ì´í„°ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ìŠµë‹ˆë‹¤. ì„±ê³µì ìœ¼ë¡œ ë°ì´í„°ê°€ ì‚­ì œë˜ë©´ ë³„ë„ì˜ body ë‚´ìš© ì—†ì´ ì„±ê³µ ì‘ë‹µë§Œ ëŒì•„ì˜µë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">DELETE &#x2F;films&#x2F;2023042403<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h5 id=\"6-HEAD\"><a href=\"#6-HEAD\" class=\"headerlink\" title=\"6. HEAD\"></a>6. HEAD</h5><p>GET ë©”ì„œë“œì™€ ë™ì¼í•œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ì§€ë§Œ ì„œë²„ê°€ bodyë¥¼ ë³´ë‚´ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤. ë³´í†µ ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ì‘ë‹µ ë©”ì‹œì§€ë§Œì„ í™•ì¸í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">HEAD &#x2F;films&#x2F;2021022302<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<hr>\n<img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220125_07/cap02.png?raw=true\" alt=\"request\" width=\"550\">\në‹¤ì‹œ API Gatewayë¡œ ëŒì•„ì™€ì„œ, ìƒì„±í•œ PUT ë©”ì„œë“œë¥¼ ì„ íƒí•˜ê³  í†µí•© ìš”ì²­ì— ë“¤ì–´ê°‘ë‹ˆë‹¤.\n\n<img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220125_07/cap03.png?raw=true\" alt=\"mapping template\" width=\"550\">\nì•„ë˜ì˜ ë§¤í•‘ í…œí”Œë¦¿ì„ í†µí•´ urlì— ì–´ë–¤ í˜•ì‹ìœ¼ë¡œ íŒŒë¼ë¯¸í„°ë¥¼ ì œê³µí•  ê²ƒì¸ì§€ ì„¤ì •í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì •ì˜ëœ í…œí”Œë¦¿ì´ ì—†ëŠ” ê²½ìš° íŒ¨ìŠ¤ìŠ¤ë£¨ë¥¼ í•˜ë„ë¡ ì„¤ì •í•˜ê³  Content-Typeìœ¼ë¡œëŠ” jsonì„ ì…ë ¥í•´ì¤ë‹ˆë‹¤.\n\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">&#123;\n    &quot;movieCd&quot;: &quot;$input.params().querystring.get(&#39;movieCd&#39;)&quot;,\n    &quot;univ&quot;: &quot;$input.params().querystring.get(&#39;univ&#39;)&quot;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<p>ìœ„ì™€ ê°™ì´ key í•˜ë‚˜í•˜ë‚˜ ì§ì ‘ ì…ë ¥í•´ì£¼ì—ˆìŠµë‹ˆë‹¤. loopë¥¼ í†µí•´ í•˜ëŠ” ë°©ë²•ë„ ìˆë‹¤ê³  í•˜ëŠ”ë° ì•„ì§ ìµìˆ™ì¹˜ ì•Šì•„ ì¼ë‹¨ì€ ì´ë ‡ê²Œ ì§„í–‰í•´ë³´ì•˜ìŠµë‹ˆë‹¤. query string í˜•íƒœë¡œ input parameterë¥¼ ë°›ì•„ lambda í•¨ìˆ˜ì˜ inputìœ¼ë¡œ ë“¤ì–´ê°€ê²Œ ë©ë‹ˆë‹¤.</p>\n<img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220125_07/cap04.png?raw=true\" alt=\"test\" width=\"550\">\n<img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220125_07/cap05.png?raw=true\" alt=\"query string\" width=\"350\">\n\n<p>í…ŒìŠ¤íŠ¸ë¡œ ë“¤ì–´ê°€ ì¿¼ë¦¬ ë¬¸ìì—´ì— lambda í•¨ìˆ˜ì˜ ì…ë ¥ì— ë§ëŠ” ê°’ì„ ì…ë ¥í•´ì£¼ì—ˆìŠµë‹ˆë‹¤. ì•„ë˜ì˜ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ë©´?</p>\n<img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220125_07/cap06.png?raw=true\" alt=\"test result\" width=\"550\">\n\n<p>ìƒë‹¨ì— ì…ë ¥ëœ ìš”ì²­ urlì´ í‘œì‹œë˜ê³  ìƒíƒœ(200 ok), ì†Œìš” ì‹œê°„, lambda í•¨ìˆ˜ì—ì„œ ì‘ì„±í•œ ì¶œë ¥ì´ í‘œì‹œë©ë‹ˆë‹¤.</p>\n<p>ì—¬ëŸ¬ í…ŒìŠ¤íŠ¸ë¥¼ ê±°ì³ ê°’ë“¤ì´ ì œëŒ€ë¡œ ë“¤ì–´ê°€ëŠ” ê²ƒì„ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤.<br><img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220125_07/cap07.png?raw=true\" alt=\"result talbe\" width=\"550\"></p>\n","text":"DB í‹€ì´ ì–´ëŠì •ë„ ë§ì¶°ì¡Œìœ¼ë‹ˆ ì‹¤ì œë¡œ ë°ì´í„°ë¥¼ ë„£ì–´ë³´ë ¤ê³  í•©ë‹ˆë‹¤. ì´ì „ì— ë§Œë“¤ì–´ë‘ì—ˆë˜ Lambda í•¨ìˆ˜ì™€ API Gatewayë¥¼ ì‚¬ìš©í•˜ë©´ RESTfulí•˜ê²Œ ë°ì´í„°ë¥¼ ì…ë ¥í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. API Gateway ìœ„ì™€ ê°™ì´ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•´ì£¼ê³  PUT ë©”ì„œ...","link":"","photos":[],"count_time":{"symbolsCount":"2k","symbolsTime":"2 mins."},"categories":[{"name":"Assemble","slug":"Assemble","count":9,"path":"api/categories/Assemble.json"}],"tags":[{"name":"Assemble","slug":"Assemble","count":9,"path":"api/tags/Assemble.json"},{"name":"mySQL","slug":"mySQL","count":4,"path":"api/tags/mySQL.json"},{"name":"AWS","slug":"AWS","count":5,"path":"api/tags/AWS.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#API-Gateway\"><span class=\"toc-text\">API Gateway</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#HTTP-Method\"><span class=\"toc-text\">HTTP Method</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-ANY\"><span class=\"toc-text\">1. ANY</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#2-GET\"><span class=\"toc-text\">2. GET</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-POST\"><span class=\"toc-text\">3. POST</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-PUT\"><span class=\"toc-text\">4. PUT</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#5-DELETE\"><span class=\"toc-text\">5. DELETE</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#6-HEAD\"><span class=\"toc-text\">6. HEAD</span></a></li></ol></li></ol></li></ol>","author":{"name":"nomatterjun","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/60438045?v=4","link":"/","description":"ì•ˆë…•í•˜ì„¸ìš” ğŸ‘‹ <br/> ë°”ìœ í˜„ëŒ€ì¸ë“¤ì˜ ì¼ìƒì— <br/> ì‘ì€ ë³€í™”ë¥¼ ì‹¬ê³  ì‹¶ì€ ê°œë°œì <br/> ì´ì°½ì¤€ì…ë‹ˆë‹¤.","socials":{"github":"https://github.com/nomatterjun","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"instagram":{"icon":"/assets/instagram.svg","link":"https://www.instagram.com/nomatter_jun/"}}}},"mapped":true,"prev_post":{"title":"8)ğŸ“±iOSì•±ê°œë°œ - Lambda í•¨ìˆ˜ì—ì„œ ë‹¤ë¥¸ Lambda í•¨ìˆ˜ ì‹¤í–‰í•˜ê¸°","uid":"a41d20cacf7715bb74660a95ac0d6e15","slug":"Assemble/220130_08/2022-01-30-assemble08","date":"2022-01-29T15:00:00.000Z","updated":"2023-03-31T10:38:42.995Z","comments":true,"path":"api/articles/Assemble/220130_08/2022-01-30-assemble08.json","keywords":null,"cover":[],"text":"DBì˜ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ì±„ìš°ê³  apië¡œ ë¶ˆëŸ¬ì˜¤ëŠ” ì‘ì—…ì„ ê³„ì† ì§„í–‰í•˜ë˜ ì¤‘ì— Lambda í•¨ìˆ˜ì—ì„œ ë‹¤ë¥¸ Lambda í•¨ìˆ˜ë¥¼ ë¶ˆëŸ¬ì˜¤ë©´ ê°„ë‹¨í•˜ê²Œ ëë‚¼ ìˆ˜ ìˆëŠ” ì‘ì—…ì„ ë§ˆì£¼ì¹˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ë°©ë²•ì„ ì°¾ì•„ë³´ë‹ˆ AWSì—ì„œ Invoke í•¨ìˆ˜ë¥¼ ì œê³µí•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤....","link":"","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[{"name":"Assemble","slug":"Assemble","count":9,"path":"api/categories/Assemble.json"}],"tags":[{"name":"Python","slug":"Python","count":6,"path":"api/tags/Python.json"},{"name":"Assemble","slug":"Assemble","count":9,"path":"api/tags/Assemble.json"},{"name":"AWS","slug":"AWS","count":5,"path":"api/tags/AWS.json"}],"author":{"name":"nomatterjun","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/60438045?v=4","link":"/","description":"ì•ˆë…•í•˜ì„¸ìš” ğŸ‘‹ <br/> ë°”ìœ í˜„ëŒ€ì¸ë“¤ì˜ ì¼ìƒì— <br/> ì‘ì€ ë³€í™”ë¥¼ ì‹¬ê³  ì‹¶ì€ ê°œë°œì <br/> ì´ì°½ì¤€ì…ë‹ˆë‹¤.","socials":{"github":"https://github.com/nomatterjun","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"instagram":{"icon":"/assets/instagram.svg","link":"https://www.instagram.com/nomatter_jun/"}}}}},"next_post":{"title":"6)ğŸ“±iOSì•±ê°œë°œ - DB ì¬ì„¤ê³„","uid":"291cbcf6b4765cf7164ff2800622aa73","slug":"Assemble/220124_06/2022-01-24-assemble06","date":"2022-01-23T15:00:00.000Z","updated":"2023-03-31T10:38:18.055Z","comments":true,"path":"api/articles/Assemble/220124_06/2022-01-24-assemble06.json","keywords":null,"cover":[],"text":"DB ì¬ì„¤ê³„ì´ì „ì˜ DBëŠ” ê´€ê³„í˜•DBë¡œì„œì˜ ê¸°ëŠ¥ì„ í•˜ì§€ ëª»í•˜ì˜€ìŠµë‹ˆë‹¤. ê° ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì´ì˜ ê´€ê³„ë¥¼ ì„¤ëª…í•  ìˆ˜ ì—†ì—ˆê³ , ìì—°ìŠ¤ëŸ½ê²Œ ì™¸ë˜í‚¤ë„ ì˜ëª» ì—°ê²°ë˜ì–´ ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ëœ¯ì–´ê³ ì³¤ìŠµë‹ˆë‹¤. filmê³¼ filmInfo í…Œì´ë¸”ì´ ë¶„ë¦¬...","link":"","photos":[],"count_time":{"symbolsCount":"2.6k","symbolsTime":"2 mins."},"categories":[{"name":"Assemble","slug":"Assemble","count":9,"path":"api/categories/Assemble.json"}],"tags":[{"name":"Assemble","slug":"Assemble","count":9,"path":"api/tags/Assemble.json"},{"name":"mySQL","slug":"mySQL","count":4,"path":"api/tags/mySQL.json"}],"author":{"name":"nomatterjun","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/60438045?v=4","link":"/","description":"ì•ˆë…•í•˜ì„¸ìš” ğŸ‘‹ <br/> ë°”ìœ í˜„ëŒ€ì¸ë“¤ì˜ ì¼ìƒì— <br/> ì‘ì€ ë³€í™”ë¥¼ ì‹¬ê³  ì‹¶ì€ ê°œë°œì <br/> ì´ì°½ì¤€ì…ë‹ˆë‹¤.","socials":{"github":"https://github.com/nomatterjun","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"instagram":{"icon":"/assets/instagram.svg","link":"https://www.instagram.com/nomatter_jun/"}}}}}}