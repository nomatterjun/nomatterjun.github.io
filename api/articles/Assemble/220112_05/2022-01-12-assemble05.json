{"title":"5)ğŸ“±iOSì•±ê°œë°œ - Lambda í•¨ìˆ˜ ìƒì„± & API ë°°í¬í•˜ê¸°","uid":"3dd5dd23bc1bf752e32b431e49dca7c1","slug":"Assemble/220112_05/2022-01-12-assemble05","date":"2022-01-11T15:00:00.000Z","updated":"2023-03-31T10:38:04.381Z","comments":true,"path":"api/articles/Assemble/220112_05/2022-01-12-assemble05.json","keywords":null,"cover":[],"content":"<h3 id=\"í•¨ìˆ˜ë¥¼-í…ŒìŠ¤íŠ¸í• -ë¡œì»¬-í™˜ê²½-ë§Œë“¤ê¸°\"><a href=\"#í•¨ìˆ˜ë¥¼-í…ŒìŠ¤íŠ¸í• -ë¡œì»¬-í™˜ê²½-ë§Œë“¤ê¸°\" class=\"headerlink\" title=\"í•¨ìˆ˜ë¥¼ í…ŒìŠ¤íŠ¸í•  ë¡œì»¬ í™˜ê²½ ë§Œë“¤ê¸°\"></a>í•¨ìˆ˜ë¥¼ í…ŒìŠ¤íŠ¸í•  ë¡œì»¬ í™˜ê²½ ë§Œë“¤ê¸°</h3><p>ì™„ì„±ëœ í•¨ìˆ˜ë¥¼ ì•„ë§ˆì¡´ ì„œë²„ì— ì˜¬ë¦¬ê³  ì‹¶ì–´ì„œ ë¡œì»¬ì—ì„œ ë¨¼ì € í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•œ í™˜ê²½ì„ ë§Œë“¤ì–´ì£¼ê² ìŠµë‹ˆë‹¤. íŒŒì´ì¬ì„ ì‚¬ìš©í•´ì„œ MySQLì— ì ‘ê·¼í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— ë¨¼ì € PyMySQLì´ë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤. ì•„ë˜ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤. (ë§¥ í™˜ê²½)</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">$ pip install PyMySQL<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>ì´ì œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">import pymysql as mysql\nimport pandas as pd\n\ndb &#x3D; mysql.connect(\n    host&#x3D;&#39;ë³¸ì¸ì˜ RDS ì—”ë“œí¬ì¸íŠ¸&#39;, \n    user&#x3D;&#39;RDS username&#39;, \n    password&#x3D;&#39;RDS password&#39;, \n    db&#x3D;&#39;ë³¸ì¸ì˜ DB ì´ë¦„&#39;, \n    charset&#x3D;&#39;utf8&#39;\n)\n\ntry:\n    with db.cursor(mysql.cursors.DictCursor) as cursor:\n        sql &#x3D; &quot;SELECT * FROM actor&quot;\n        cursor.execute(sql)\n        result &#x3D; cursor.fetchall()\n\n        result &#x3D; pd.DataFrame(result)\n        print(result)\nfinally:\n    db.close()<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h4 id=\"DB-ì—°ê²°-connect\"><a href=\"#DB-ì—°ê²°-connect\" class=\"headerlink\" title=\"DB ì—°ê²° - connect()\"></a>DB ì—°ê²° - connect()</h4><pre class=\"line-numbers language-none\"><code class=\"language-none\">db &#x3D; mysql.connect(\n    host&#x3D;&#39;ë³¸ì¸ì˜ RDS ì—”ë“œí¬ì¸íŠ¸&#39;, \n    user&#x3D;&#39;RDS username&#39;, \n    password&#x3D;&#39;RDS password&#39;, \n    db&#x3D;&#39;ë³¸ì¸ì˜ DB ì´ë¦„&#39;, \n    charset&#x3D;&#39;utf8&#39;\n)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>connect() í•¨ìˆ˜ë¥¼ í†µí•´ RDSì˜ DBì— ì§ì ‘ì ìœ¼ë¡œ ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>\n<ul>\n<li>host: RDS ì—”ë“œí¬ì¸íŠ¸</li>\n<li>user: ì„¤ì •í•œ RDS username</li>\n<li>password: ì„¤ì •í•œ RDS password</li>\n<li>db: RDS DB ì´ë¦„</li>\n<li>charset: ë¬¸ì ì¸ì½”ë”</li>\n</ul>\n<h4 id=\"ì»¤ì„œ-ì‚¬ìš©-cursor\"><a href=\"#ì»¤ì„œ-ì‚¬ìš©-cursor\" class=\"headerlink\" title=\"ì»¤ì„œ ì‚¬ìš© - cursor()\"></a>ì»¤ì„œ ì‚¬ìš© - cursor()</h4><pre class=\"line-numbers language-none\"><code class=\"language-none\">db.cursor(mysql.cursors.DictCursor) as cursor<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>PyMySQLì—ì„œëŠ” ì»¤ì„œë¥¼ ì‚¬ìš©í•´ DBì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŒŒì´ì¬ ì‘ì—… ì¤‘ì—ë„ ê°€ì‹œì„±ì´ ì¢‹ì€ ì¶œë ¥ ê²°ê³¼ë¥¼ ì–»ê³  ì‹¶ì–´ ë°ì´í„°í”„ë ˆì„ í˜•íƒœë¡œ ì¶œë ¥í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ Dictionary í˜•íƒœë¡œ ê²°ê³¼ë¥¼ ë‚´ë³´ë‚´ëŠ” <strong>DictCursor</strong>ë¥¼  ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<h4 id=\"ë°ì´í„°-ì ‘ê·¼-execute\"><a href=\"#ë°ì´í„°-ì ‘ê·¼-execute\" class=\"headerlink\" title=\"ë°ì´í„° ì ‘ê·¼ - execute()\"></a>ë°ì´í„° ì ‘ê·¼ - execute()</h4><pre class=\"line-numbers language-none\"><code class=\"language-none\">sql &#x3D; &quot;SELECT * FROM actor&quot;\ncursor.execute(sql)\nresult &#x3D; cursor.fetchall()<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>execute()</strong> í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°ë¡œ ì¿¼ë¦¬ë¬¸ì„ ë„£ì–´ SQLì„ ì‹¤í–‰í•˜ê³  <strong>fetch í•¨ìˆ˜</strong>ë¥¼ ì‚¬ìš©í•´ ê²°ê³¼ë¥¼ ë°›ì•„ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. fetch í•¨ìˆ˜ì—ë„ ì—¬ëŸ¬ ì¢…ë¥˜ê°€ ìˆëŠ”ë° ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li><strong>fetchall()</strong>: ëª¨ë“  ë°ì´í„°ë¥¼ í•œ ë²ˆì— fetch</li>\n<li><strong>fetchone()</strong>: í•˜ë‚˜ì˜ í–‰ë§Œ fetch</li>\n<li><strong>fetchmany(n)</strong>: nê°œì˜ ë°ì´í„°ë¥¼ fetch</li>\n</ul>\n<h4 id=\"ê²°ê³¼ë¥¼-ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ-ì¶œë ¥\"><a href=\"#ê²°ê³¼ë¥¼-ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ-ì¶œë ¥\" class=\"headerlink\" title=\"ê²°ê³¼ë¥¼ ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ ì¶œë ¥\"></a>ê²°ê³¼ë¥¼ ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ ì¶œë ¥</h4><pre class=\"line-numbers language-none\"><code class=\"language-none\">result &#x3D; pd.DataFrame(result)\nprint(result)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p><strong>pandas</strong> ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ ê²°ê³¼ë¥¼ ë°ì´í„°í”„ë ˆì„ì˜ í˜•íƒœë¡œ ì¶œë ¥í•´ì¤ë‹ˆë‹¤.</p>\n<h4 id=\"ë°ì´í„°-ì ìš©-commit\"><a href=\"#ë°ì´í„°-ì ìš©-commit\" class=\"headerlink\" title=\"ë°ì´í„° ì ìš© - commit()\"></a>ë°ì´í„° ì ìš© - commit()</h4><p><strong>INSERT, UPDATE, DELETE</strong>ë¬¸ì€ DBì— ë³€ê²½ì´ ìƒê¸°ê²Œ ë˜ë¯€ë¡œ <strong>commit</strong> ê³¼ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. ì €ì˜ ì˜ˆì‹œì—ì„œëŠ” SELECTë§Œ ì‚¬ìš©í•˜ì—¬ commitì„ í•˜ì§€ ì•Šì•˜ì§€ë§Œ ì´ ì™¸ì˜ ê²½ìš°ì—ëŠ” ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">db.commit()<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h5 id=\"ê²°ê³¼\"><a href=\"#ê²°ê³¼\" class=\"headerlink\" title=\"ê²°ê³¼\"></a>ê²°ê³¼</h5><img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220112_05/cap01.png?raw=true\" alt=\"Result\" width=\"400\">\n\n<h4 id=\"Placeholder\"><a href=\"#Placeholder\" class=\"headerlink\" title=\"Placeholder\"></a>Placeholder</h4><p>sqlë¬¸ì„ ì‘ì„±í•  ë•Œ <strong>placeholder</strong>ë¥¼ ì‚¬ìš©í•´ ë°ì´í„°ë¥¼ ë™ì ìœ¼ë¡œ ë‹¤ë£° ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">data &#x3D; (&#39;ì¼€ë¹ˆ íŒŒì´ê¸°&#39;, 500000000)\n# data &#x3D; [[&#39;ì¼€ë¹ˆ íŒŒì´ê¸°&#39;, 1536253195], [&#39;ì—ì´ë¯¸ íŒŒìŠ¤ì¹¼&#39;, 1536253195], [&#39;ì œì„ìŠ¤ ê±´&#39;, 167400219]]\n\nsql &#x3D; &quot;SELECT * FROM filmInfo WHERE fDirector &#x3D; %s AND fBoxOffice &gt; %s&quot;\nexecute(sql, data)\nexecutemany(sql, multiple data)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ë“¤ì–´ê°„ dataë“¤ì´ ì‘ì„±ëœ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ë˜ì–´ ë°˜ë³µë¬¸ê³¼ ê°™ì€ ë™ì‘ì„ í•˜ê²Œ ë©ë‹ˆë‹¤. </p>\n<h3 id=\"Lambdaì—-í•¨ìˆ˜-ì ìš©í•˜ê¸°\"><a href=\"#Lambdaì—-í•¨ìˆ˜-ì ìš©í•˜ê¸°\" class=\"headerlink\" title=\"Lambdaì— í•¨ìˆ˜ ì ìš©í•˜ê¸°\"></a>Lambdaì— í•¨ìˆ˜ ì ìš©í•˜ê¸°</h3><p>ì´ì œ AWS ì„œë²„ì— ì „ì˜ ê³¼ì •ì„ í†µí•´ ë§Œë“¤ì–´ì§„ í•¨ìˆ˜ë“¤ì„ ì—…ë¡œë“œí•´ë³´ê² ìŠµë‹ˆë‹¤. ìš°ì„  ì´ í•¨ìˆ˜ì—ì„œ ì‚¬ìš©ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì´ ì„œë²„ì—ëŠ” ì—†ê¸° ë•Œë¬¸ì— ìš°ë¦¬ê°€ ì§ì ‘ ì œê³µí•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì›í•˜ëŠ” ë””ë ‰í† ë¦¬ì— ë‹¤ìš´ë¡œë“œ ë°›ìŠµë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">$ pip install PyMySQL -t .<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>ê·¸ë¦¬ê³  ìœ„ì˜ í•¨ìˆ˜ì—ì„œ DBì˜ ì •ë³´ì— ëŒ€í•œ ë¶€ë¶„ì„ dbinfo.py íŒŒì¼ì— ë”°ë¡œ ë¶„ë¦¬í•´ì£¼ê² ìŠµë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">db_host&#x3D;&#39;ë³¸ì¸ì˜ RDS ì—”ë“œí¬ì¸íŠ¸&#39;\ndb_user&#x3D;&#39;RDS username&#39;\ndb_password&#x3D;&#39;RDS password&#39;\ndb_name&#x3D;&#39;ë³¸ì¸ì˜ DB ì´ë¦„&#39;\ndb_charset&#x3D;&#39;utf8&#39;\ndb_port&#x3D;3306 # RDS default<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>ì›ë˜ í•¨ìˆ˜ì˜ DB ì •ë³´ ë¶€ë¶„ë„ ìˆ˜ì •í•´ì¤ë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">import dbinfo\n\ndb &#x3D; mysql.connect(\n    host&#x3D;dbinfo.db_host, \n    user&#x3D;dbinfo.db_user, \n    password&#x3D;dbinfo.db_password, \n    db&#x3D;dbinfo.db_name, \n    charset&#x3D;dbinfo.db_charset\n)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>ë§ˆì§€ë§‰ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì‚¬ìš©í–ˆë˜ pandas ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê²Œ ë°”ê¾¸ì–´ì¤ë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">result &#x3D; pd.DataFrame(result)\nprint(result)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">for result in results:\n    print(result)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>ìœ„ ì½”ë“œë¥¼ ì•„ë˜ ì½”ë“œì™€ ê°™ì´ ë°”ê¿”ì£¼ê³ , pandasë¥¼ importí•œ ë¶€ë¶„ë„ ì‚­ì œí•´ì¤ë‹ˆë‹¤.<br><img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220112_05/cap02.png?raw=true\" alt=\"zip\" width=\"550\"><br>ìµœì¢…ì ìœ¼ë¡œ ì–»ì€ ì´ ë„¤ê°€ì§€ íŒŒì¼ê³¼ í´ë”ë¥¼ zipíŒŒì¼ë¡œ ì••ì¶•í•´ì¤ë‹ˆë‹¤. ì´ ì••ì¶• íŒŒì¼ì„ lambda í•¨ìˆ˜ì— ì—…ë¡œë“œ í•´ì•¼í•©ë‹ˆë‹¤.<br><img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220112_05/cap03.png?raw=true\" alt=\"upload zip\" width=\"300\"><br>ìš°ì¸¡ ìƒë‹¨ì—ì„œ ì—…ë¡œë“œë¥¼ ì§„í–‰í•˜ë©´,<br><img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220112_05/cap04.png?raw=true\" alt=\"result\" width=\"550\"><br>ì´ë ‡ê²Œ lambda í•¨ìˆ˜ì˜ ë‚´ìš©ì´ ì••ì¶• íŒŒì¼ì˜ ë‚´ìš©ìœ¼ë¡œ êµì²´ë©ë‹ˆë‹¤.<br><img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220112_05/cap05.png?raw=true\" alt=\"runtime\" width=\"550\"><br><img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220112_05/cap06.png?raw=true\" alt=\"runtime2\" width=\"550\"><br>ë§ˆì§€ë§‰ìœ¼ë¡œ ì½”ë“œ í•˜ë‹¨ì— ìˆëŠ” <strong>ëŸ°íƒ€ì„ ì„¤ì • &gt; í¸ì§‘</strong>ì—ì„œ í•¸ë“¤ëŸ¬ë¥¼ <strong>ì‹¤í–‰í•  íŒŒì¼ ì´ë¦„.ê·¸ ì½”ë“œì—ì„œ ì‹¤í–‰í•  í•¨ìˆ˜ ì´ë¦„</strong>ìœ¼ë¡œ ë°”ê¿”ì£¼ê³  ì €ì¥í•©ë‹ˆë‹¤.<br><img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220112_05/cap07.png?raw=true\" alt=\"test\" width=\"550\"><br>ì´ì œ ì´ ì½”ë“œë¥¼ Test í•´ë³´ê² ìŠµë‹ˆë‹¤. Test ë²„íŠ¼ì„ ëˆ„ë¥´ê³ ,<br><img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220112_05/cap08.png?raw=true\" alt=\"test2\" width=\"550\"><br>ì´ë²¤íŠ¸ ì´ë¦„ì„ ì •í•´ì£¼ê³ , ì œ ì½”ë“œëŠ” íŒŒë¼ë¯¸í„°ê°€ í•„ìš”ì—†ìœ¼ë¯€ë¡œ ê³µë€ìœ¼ë¡œ ë‘ê³  ìƒì„±í•´ì¤ë‹ˆë‹¤. ë‹¤ìŒë¶€í„°ëŠ” ì´ë²¤íŠ¸ í…œí”Œë¦¿ì— ì €ì¥ëœ í…ŒìŠ¤íŠ¸ ì´ë²¤íŠ¸ë¥¼ ì„ íƒí•´ì„œ ì‚¬ìš©í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220112_05/cap09.png?raw=true\" alt=\"result\" width=\"550\"><br>ì´ë ‡ê²Œ ê²°ê³¼ê°€ ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ë˜ì—ˆë‹¤ë©´ ì„±ê³µì…ë‹ˆë‹¤!</p>\n<h3 id=\"API-ë°°í¬\"><a href=\"#API-ë°°í¬\" class=\"headerlink\" title=\"API ë°°í¬\"></a>API ë°°í¬</h3><p>ì´ë ‡ê²Œ ë§Œë“¤ì–´ì§„ APIë¥¼ ë°°í¬í•´ë³´ê² ìŠµë‹ˆë‹¤. API Gatewayë¡œ ëŒì•„ì™€ì„œ API ë°°í¬ë¥¼ í•´ì¤ë‹ˆë‹¤.<br><img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220112_05/cap10.png?raw=true\" alt=\"Deploy\" width=\"550\"><br><img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220112_05/cap11.png?raw=true\" alt=\"Deploy\" width=\"550\"></p>\n<p>ìŠ¤í…Œì´ì§€ í¸ì§‘ê¸°ì˜ ìƒë‹¨ì— API í˜¸ì¶œ ì£¼ì†Œê°€ í‘œì‹œë©ë‹ˆë‹¤.<br><img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220112_05/cap12.png?raw=true\" alt=\"Result\" width=\"550\"></p>\n<p>ì™¼ìª½ì—ì„œ ì´ì „ì— ë§Œë“  ì£¼ì†Œë¥¼ ì°¾ì•„ ë“¤ì–´ê°€ë©´ í•´ë‹¹ ì£¼ì†Œì˜ API í˜¸ì¶œ ì£¼ì†Œë„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220112_05/cap13.png?raw=true\" alt=\"GET\" width=\"550\"></p>\n<p>ì´ ì£¼ì†Œë¡œ ì ‘ì†í•´ë³´ë©´ í˜„ì¬ëŠ” nullì´ ëœ¨ëŠ” ê²ƒì´ ì •ìƒì…ë‹ˆë‹¤. Lambda í•¨ìˆ˜ì—ì„œ ì•„ë¬´ê²ƒë„ return í•´ì£¼ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì´ì£ . API ì£¼ì†Œê°€ ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ” ê²ƒì„ í™•ì¸í–ˆìœ¼ë‹ˆ ì´ì œ ì •ë§ë¡œ return ê°’ë„ ë§Œë“¤ì–´ì¤ì‹œë‹¤. Lambda ì„œë¹„ìŠ¤ë¡œ ëŒì•„ê°€ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì¤ë‹ˆë‹¤. ì €ëŠ” listë¥¼ ë§Œë“¤ì–´ ê²°ê³¼ë“¤ì„ append í•´ì¤€ ë’¤ return í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">import dbinfo\nimport pymysql as mysql\n\ndb &#x3D; mysql.connect(\n    host&#x3D;dbinfo.db_host, \n    user&#x3D;dbinfo.db_user, \n    password&#x3D;dbinfo.db_password, \n    db&#x3D;dbinfo.db_name, \n    charset&#x3D;dbinfo.db_charset)\n\ndef lambda_handler(event, context):\n    result_list &#x3D; []\n    try:\n        with db.cursor(mysql.cursors.DictCursor) as cursor:\n            sql &#x3D; &quot;SELECT * FROM actor&quot;\n            cursor.execute(sql)\n            results &#x3D; cursor.fetchall()\n    \n            for result in results:\n                print(result)\n                result_list.append(result)\n    finally:\n        return result_list<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>ì´ì œ ë‹¤ì‹œ API í˜¸ì¶œ ì£¼ì†Œë¡œ ì ‘ì†í•´ë³´ë©´?<br><img src=\"https://github.com/StanSign/StanSign.github.io/blob/main/_posts/Assemble/220112_05/cap14.png?raw=true\" alt=\"API result\" width=\"300\"></p>\n<p>ì´ë ‡ê²Œ ê²°ê³¼ê°’ì´ ë‚˜ì˜¤ë©´ API ìƒì„±ì— ì„±ê³µí•œ ê²ƒì…ë‹ˆë‹¤!</p>\n","text":"í•¨ìˆ˜ë¥¼ í…ŒìŠ¤íŠ¸í•  ë¡œì»¬ í™˜ê²½ ë§Œë“¤ê¸°ì™„ì„±ëœ í•¨ìˆ˜ë¥¼ ì•„ë§ˆì¡´ ì„œë²„ì— ì˜¬ë¦¬ê³  ì‹¶ì–´ì„œ ë¡œì»¬ì—ì„œ ë¨¼ì € í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•œ í™˜ê²½ì„ ë§Œë“¤ì–´ì£¼ê² ìŠµë‹ˆë‹¤. íŒŒì´ì¬ì„ ì‚¬ìš©í•´ì„œ MySQLì— ì ‘ê·¼í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— ë¨¼ì € PyMySQLì´ë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤. ì•„ë˜ ëª…ë ¹ì–´ë¡œ ...","link":"","photos":[],"count_time":{"symbolsCount":"4.6k","symbolsTime":"4 mins."},"categories":[{"name":"Assemble","slug":"Assemble","count":9,"path":"api/categories/Assemble.json"}],"tags":[{"name":"Python","slug":"Python","count":6,"path":"api/tags/Python.json"},{"name":"AWS","slug":"AWS","count":5,"path":"api/tags/AWS.json"},{"name":"mySQL","slug":"mySQL","count":4,"path":"api/tags/mySQL.json"},{"name":"Assemble","slug":"Assemble","count":9,"path":"api/tags/Assemble.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%ED%95%A8%EC%88%98%EB%A5%BC-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%A0-%EB%A1%9C%EC%BB%AC-%ED%99%98%EA%B2%BD-%EB%A7%8C%EB%93%A4%EA%B8%B0\"><span class=\"toc-text\">í•¨ìˆ˜ë¥¼ í…ŒìŠ¤íŠ¸í•  ë¡œì»¬ í™˜ê²½ ë§Œë“¤ê¸°</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#DB-%EC%97%B0%EA%B2%B0-connect\"><span class=\"toc-text\">DB ì—°ê²° - connect()</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%EC%BB%A4%EC%84%9C-%EC%82%AC%EC%9A%A9-cursor\"><span class=\"toc-text\">ì»¤ì„œ ì‚¬ìš© - cursor()</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%91%EA%B7%BC-execute\"><span class=\"toc-text\">ë°ì´í„° ì ‘ê·¼ - execute()</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%EA%B2%B0%EA%B3%BC%EB%A5%BC-%EB%8D%B0%EC%9D%B4%ED%84%B0%ED%94%84%EB%A0%88%EC%9E%84%EC%9C%BC%EB%A1%9C-%EC%B6%9C%EB%A0%A5\"><span class=\"toc-text\">ê²°ê³¼ë¥¼ ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ ì¶œë ¥</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%81%EC%9A%A9-commit\"><span class=\"toc-text\">ë°ì´í„° ì ìš© - commit()</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EA%B2%B0%EA%B3%BC\"><span class=\"toc-text\">ê²°ê³¼</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Placeholder\"><span class=\"toc-text\">Placeholder</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Lambda%EC%97%90-%ED%95%A8%EC%88%98-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\"><span class=\"toc-text\">Lambdaì— í•¨ìˆ˜ ì ìš©í•˜ê¸°</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#API-%EB%B0%B0%ED%8F%AC\"><span class=\"toc-text\">API ë°°í¬</span></a></li></ol>","author":{"name":"nomatterjun","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/60438045?v=4","link":"/","description":"ì•ˆë…•í•˜ì„¸ìš” ğŸ‘‹ <br/> ë°”ìœ í˜„ëŒ€ì¸ë“¤ì˜ ì¼ìƒì— <br/> ì‘ì€ ë³€í™”ë¥¼ ì‹¬ê³  ì‹¶ì€ ê°œë°œì <br/> ì´ì°½ì¤€ì…ë‹ˆë‹¤.","socials":{"github":"https://github.com/nomatterjun","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"instagram":{"icon":"fab fa-instagram","link":"https://www.instagram.com/nomatter_jun/"}}}},"mapped":true,"prev_post":{"title":"6)ğŸ“±iOSì•±ê°œë°œ - DB ì¬ì„¤ê³„","uid":"291cbcf6b4765cf7164ff2800622aa73","slug":"Assemble/220124_06/2022-01-24-assemble06","date":"2022-01-23T15:00:00.000Z","updated":"2023-03-31T10:38:18.055Z","comments":true,"path":"api/articles/Assemble/220124_06/2022-01-24-assemble06.json","keywords":null,"cover":[],"text":"DB ì¬ì„¤ê³„ì´ì „ì˜ DBëŠ” ê´€ê³„í˜•DBë¡œì„œì˜ ê¸°ëŠ¥ì„ í•˜ì§€ ëª»í•˜ì˜€ìŠµë‹ˆë‹¤. ê° ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì´ì˜ ê´€ê³„ë¥¼ ì„¤ëª…í•  ìˆ˜ ì—†ì—ˆê³ , ìì—°ìŠ¤ëŸ½ê²Œ ì™¸ë˜í‚¤ë„ ì˜ëª» ì—°ê²°ë˜ì–´ ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ëœ¯ì–´ê³ ì³¤ìŠµë‹ˆë‹¤. filmê³¼ filmInfo í…Œì´ë¸”ì´ ë¶„ë¦¬...","link":"","photos":[],"count_time":{"symbolsCount":"2.6k","symbolsTime":"2 mins."},"categories":[{"name":"Assemble","slug":"Assemble","count":9,"path":"api/categories/Assemble.json"}],"tags":[{"name":"mySQL","slug":"mySQL","count":4,"path":"api/tags/mySQL.json"},{"name":"Assemble","slug":"Assemble","count":9,"path":"api/tags/Assemble.json"}],"author":{"name":"nomatterjun","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/60438045?v=4","link":"/","description":"ì•ˆë…•í•˜ì„¸ìš” ğŸ‘‹ <br/> ë°”ìœ í˜„ëŒ€ì¸ë“¤ì˜ ì¼ìƒì— <br/> ì‘ì€ ë³€í™”ë¥¼ ì‹¬ê³  ì‹¶ì€ ê°œë°œì <br/> ì´ì°½ì¤€ì…ë‹ˆë‹¤.","socials":{"github":"https://github.com/nomatterjun","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"instagram":{"icon":"fab fa-instagram","link":"https://www.instagram.com/nomatter_jun/"}}}}},"next_post":{"title":"4)ğŸ“±iOSì•±ê°œë°œ - API Gateway, Lambda ì‚¬ìš©í•˜ê¸°","uid":"6fb7b20ef7439001e04bd4ee42c09224","slug":"Assemble/220111_04/2022-01-11-assemble04","date":"2022-01-10T15:00:00.000Z","updated":"2023-03-31T10:37:48.506Z","comments":true,"path":"api/articles/Assemble/220111_04/2022-01-11-assemble04.json","keywords":null,"cover":[],"text":"ì‚¬ìš©í•  AWS ì„œë¹„ìŠ¤ë“¤ìš°ì„ .. ì•ˆê·¸ë˜ë„ ì²˜ìŒ ë‹¤ë¤„ë³´ëŠ” AWSì¸ë° ì‚¬ìš©í•˜ëŠ” ì„œë¹„ìŠ¤ë“¤ì´ ë„ˆë¬´ ë§ê²Œ ëŠê»´ì§‘ë‹ˆë‹¤.. í•˜ì§€ë§Œ ëª¨ë°”ì¼ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” APIì˜ í˜•íƒœë¡œ DBì— ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ê³  í•´ì„œ ì´ëŸ° ë°©ì‹ìœ¼ë¡œ ì§„í–‰í•´ë³´ê³ ì í•©ë‹ˆë‹¤. ì§„í–‰ ê³¼ì •ì—ì„œ ë§ì€ ì˜¤ë¥˜...","link":"","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"Assemble","slug":"Assemble","count":9,"path":"api/categories/Assemble.json"}],"tags":[{"name":"AWS","slug":"AWS","count":5,"path":"api/tags/AWS.json"},{"name":"Assemble","slug":"Assemble","count":9,"path":"api/tags/Assemble.json"}],"author":{"name":"nomatterjun","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/60438045?v=4","link":"/","description":"ì•ˆë…•í•˜ì„¸ìš” ğŸ‘‹ <br/> ë°”ìœ í˜„ëŒ€ì¸ë“¤ì˜ ì¼ìƒì— <br/> ì‘ì€ ë³€í™”ë¥¼ ì‹¬ê³  ì‹¶ì€ ê°œë°œì <br/> ì´ì°½ì¤€ì…ë‹ˆë‹¤.","socials":{"github":"https://github.com/nomatterjun","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"instagram":{"icon":"fab fa-instagram","link":"https://www.instagram.com/nomatter_jun/"}}}}}}