{"title":"03)ğŸŠ WWDC23 - SwiftData","uid":"358b9ce668b5d19c091a8d1511c207a6","slug":"WWDC23/2023-06-12-WWDC23-03","date":"2023-06-11T15:00:00.000Z","updated":"2023-06-12T03:37:10.117Z","comments":true,"path":"api/articles/WWDC23/2023-06-12-WWDC23-03.json","keywords":null,"cover":"https://i.imgur.com/7ZMZmZ5.jpg","content":"<h1 id=\"WWDC23-SwiftData\"><a href=\"#WWDC23-SwiftData\" class=\"headerlink\" title=\"WWDC23 - SwiftData\"></a>WWDC23 - SwiftData</h1><p>ì˜¤ëŠ˜ì€ SwiftDataë¥¼ ì•Œì•„ë³¼ê±°ì—ìš”<br>Widgetì—ë‹¤ ì¨ë¨¹ì–´ì•¼ë˜ê±°ë“ ìš” ğŸ˜„</p>\n<p>ì €ëŠ” ì¼ë‹¨ CoreDataë¥¼ ì¨ë³¸ ì ì´ ì—†ìŠµë‹ˆë‹¤.<br>ì•„ë§ˆ ì¡°ë§Œê°„ ì“¸ ê²ƒ ê°™ê¸°ëŠ” í•œë°.. ì¼ë‹¨ì€ ì—†ì–´ìš”..<br>ì™œ ì•ˆì¼ëƒë©´ìš”.. ìŠ¬ì© ë´ë„ íŒŒì¼ì´ ë„ˆë¬´ ì—¬ê¸°ì €ê¸° ë¶„ì‚°ë˜ê²Œ ë˜ëŠ” ê²ƒ ê°™ë”ë¼êµ¬ìš”..<br>ì „ìš©ì˜ íŒŒì¼ í˜•ì‹ë„ ìˆê³  ë§ì´ì£ â€¦?<br>ê·¸ë˜ì„œ ëŒ€ì‹  Realmì„ ìì£¼ ì¼ì—ˆìŠµë‹ˆë‹¤.</p>\n<p>ê·¸ëŸ°ë°.. SwiftDataê°€ ìƒˆë¡œ ë‚˜ì™”ì–´ìš”!<br>iOS 17ë¶€í„° ì§€ì›í•´ì„œ ì‹¤ë¬´ì—ì„œëŠ” 4~5ë…„ ë’¤ì—ë‚˜ ì“°ê²Œ ë  ê²ƒ ê°™ì§€ë§Œ ë‚˜ì˜¨ê²Œ ì–´ë”˜ê°€ìš” ğŸ˜‚<br>ì¼ë‹¨ Schemaë¥¼ ì •ì˜í•´ì£¼ëŠ” ê³¼ì •ë¶€í„° ë„ˆë¬´ ê°„ë‹¨í•©ë‹ˆë‹¤.</p>\n<p>ì¶œë°œí•´ë³´ì£ !</p>\n<h2 id=\"Using-the-Model-Macro\"><a href=\"#Using-the-Model-Macro\" class=\"headerlink\" title=\"Using the Model Macro\"></a>Using the Model Macro</h2><p>SwiftDataì˜ <strong>Schema</strong> ëŠ” ì¼ë°˜ í´ë˜ìŠ¤ì— <strong><code>@Model</code> ë§¤í¬ë¡œ</strong> ë¥¼ ë¶™ì—¬ì£¼ëŠ” ê²ƒìœ¼ë¡œ ëì…ë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token class-name\">SwiftData</span>\n\n<span class=\"token attribute atrule\">@Model</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Trip</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">var</span> name<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span>\n  <span class=\"token keyword\">var</span> destination<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span>\n  <span class=\"token keyword\">var</span> endDate<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Date</span>\n  <span class=\"token keyword\">var</span> startDate<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Date</span>\n\n  <span class=\"token keyword\">var</span> bucketList<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">BucketListItem</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">var</span> livingAccommodation<span class=\"token punctuation\">:</span> <span class=\"token class-name\">LivingAccommodation</span><span class=\"token operator\">?</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>ë„ˆë¬´ ì‰½ê³  ê°„ë‹¨í•˜ì£ ..?</p>\n<p><code>@Model</code> ë§¤í¬ë¡œëŠ” í´ë˜ìŠ¤ ë‚´ë¶€ì˜ <strong>Stored Property</strong> ë“¤ì„ <strong>Persisted Property</strong> ë¡œ ë°”ê¿”ì¤ë‹ˆë‹¤.</p>\n<p>ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” íƒ€ì…ë“¤ì€ ì´ë ‡ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>ê¸°ë³¸ì ì¸ Value Types (<code>Int</code>, <code>String</code>, â€¦)</li>\n<li><code>struct</code></li>\n<li><code>enum</code></li>\n<li><code>Codable</code></li>\n<li><code>[ANY VALUE TYPE]</code></li>\n</ul>\n<p>ë‹¤ë¥¸ <code>@Model</code> í´ë˜ìŠ¤ë¥¼ ì°¸ì¡°í•˜ëŠ” ê²ƒìœ¼ë¡œ ê´€ê³„ êµ¬ì¡°ë¥¼ í˜•ì„±í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>\n<ul>\n<li><code>[BucketListItem]?</code> ì™€ ê°™ì€..</li>\n</ul>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>SwiftData í´ë˜ìŠ¤ì™€ ì‹¤ì œ ì‚¬ìš©ë˜ëŠ” í´ë˜ìŠ¤ëŠ” ë™ì¼í•œê°€ìš”?</p></blockquote>\n<p>ê°œì¸ì ìœ¼ë¡œ ê°€ì¥ ê¶ê¸ˆí•œ ì ì´ì˜€ìŠµë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">protocol</span> <span class=\"token class-name\">Storable</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">associatedtype</span> <span class=\"token class-name\">RealmObject</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">RealmSwift</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">Object</span>\n  <span class=\"token keyword\">associatedtype</span> <span class=\"token class-name\">PropertyValue</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">PropertyValueType</span>\n\n  <span class=\"token comment\">/// ë°ì´í„° ëª¨ë¸ì˜ ì‹ë³„ìë¡œ ì‚¬ìš©ë˜ëŠ” í”„ë¡œí¼í‹°</span>\n  <span class=\"token keyword\">var</span> identifier<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Int</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">get</span> <span class=\"token punctuation\">&#125;</span>\n\n  <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>realmObject<span class=\"token punctuation\">:</span> <span class=\"token class-name\">RealmObject</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">func</span> <span class=\"token function-definition function\">realmObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token class-name\">RealmObject</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>Realmì„ ì‚¬ìš©í•˜ë‹¤ë³´ë‹ˆ DBì—ì„œ ì‚¬ìš©í•˜ëŠ” Data êµ¬ì¡°ì²´ì™€ ì‹¤ì œë¡œ ì‚¬ìš©ë˜ëŠ” ë„ë©”ì¸ í˜•íƒœì˜ êµ¬ì¡°ì²´ëŠ” ë‹¤ë¥¸ êµ¬ì¡°ì²´ë¥¼ ì‚¬ìš©í•˜ê³¤ í–ˆê±°ë“ ìš”..<br>(ë³´í†µ ë©€í‹° ì“°ë ˆë”©ì˜ ê³¼ì •ì—ì„œ ë¬¸ì œë“¤ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.)</p>\n<p>í•˜ì§€ë§Œ SwiftDataëŠ” ì €í¬ê°€ ì›ë˜ ì‚¬ìš©í•˜ë˜ ì½”ë“œì™€ ë³„ ì°¨ì´ê°€ ì—†ë„ë¡ ì• í”Œì´ ë…¸ë ¥í–ˆê¸° ë•Œë¬¸ì— <strong>Model í´ë˜ìŠ¤ë¥¼ ì§ì ‘ì ìœ¼ë¡œ UI ë ˆì´ì–´ ë“±ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤</strong> ê³  í•©ë‹ˆë‹¤.</p>\n<hr>\n<p><strong><code>@Attribute</code></strong> ì™€ <strong><code>@Relationship</code></strong> ìœ¼ë¡œ í”„ë¡œí¼í‹°ì— ì¶”ê°€ì ì¸ ì œì–´ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<h3 id=\"Attribute\"><a href=\"#Attribute\" class=\"headerlink\" title=\"@Attribute\"></a>@Attribute</h3><pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token attribute atrule\">@Attribute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>unique<span class=\"token punctuation\">)</span> <span class=\"token keyword\">var</span> name<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><strong><code>@Attribute(.unique)</code></strong> ë¡œ PKë¥¼ ì„¤ì •í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. PKë¡œ ì„¤ì •ëœ í”„ë¡œí¼í‹°ì™€ ê°™ì€ ê°’ì„ ê°€ì§„ ëª¨ë¸ì´ Createì— ëŒ€ì‘ë˜ëŠ” <code>insert()</code>ë¡œ ì¸í•´ ì¶”ê°€ë  ë•Œ Updateì— ëŒ€ì‘ë˜ëŠ” <code>upsert()</code>ë¡œ ì „í™˜ë˜ëŠ” íš¨ê³¼ë¥¼ ê°€ì§‘ë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token attribute atrule\">@Attribute</span><span class=\"token punctuation\">(</span>originalName<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"start_date\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">var</span> startDate<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Date</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><strong><code>@Attribute(originalName)</code></strong> ìœ¼ë¡œëŠ” Migrationì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. í”„ë¡œí¼í‹°ì˜ ì´ë¦„ì€ ë°”ê¾¸ê³  ì‹¶ì§€ë§Œ ë°ì´í„°ëŠ” ê·¸ëŒ€ë¡œ ë‚¨ê²¨ë‘ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ê·¸ ì™¸ì—ë„</p>\n<ul>\n<li>ì™¸ë¶€ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì‚¬ìš©</li>\n<li><code>Transformable</code></li>\n<li>Spotlight</li>\n<li>Hash ìˆ˜ì •<br>ë“±ì˜ ì‘ì—…ì´ ê°€ëŠ¥í•˜ë‹¤ê³  í•˜ë„¤ìš”.</li>\n</ul>\n<h3 id=\"Relationship\"><a href=\"#Relationship\" class=\"headerlink\" title=\"@Relationship\"></a>@Relationship</h3><p>ê° ëª¨ë¸ê°„ Relationshipì´ ì„¤ì •ë˜ì–´ ìˆì„ ë•Œ, ì‚­ì œ ì •ì±…ì˜ ê¸°ë³¸ê°’ì€ <strong>Nullify</strong> ì…ë‹ˆë‹¤.</p>\n<p>ì˜ˆì‹œë¡œ ì‚´í´ë³´ë©´ <code>Trip</code>ì´ ì‚­ì œëì„ë•Œ, <code>BucketListItem</code>ê³¼ <code>LivingAccommodation</code>ì˜ Inverse Relationshipìœ¼ë¡œ ë“±ë¡ë˜ì–´ ìˆë˜ <code>trip</code>ì´ë¼ëŠ” í”„ë¡œí¼í‹°ê°€ NULLì´ ë˜ëŠ” ê²ƒì´ì£ .</p>\n<p>í•˜ì§€ë§Œ <code>.cascade</code> ì •ì±…ìœ¼ë¡œ Nullify ëŒ€ì‹  <strong>í•¨ê»˜ ì‚­ì œ</strong> ë˜ë„ë¡ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token attribute atrule\">@Relationship</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>cascade<span class=\"token punctuation\">)</span> <span class=\"token keyword\">var</span> bucketList<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">BucketListItem</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<ul>\n<li><code>originalName</code></li>\n<li>toMany Relationshipì¼ ë•Œì˜ ê°œìˆ˜ ì œí•œ</li>\n<li>Hash ìˆ˜ì •</li>\n</ul>\n<h3 id=\"Transient\"><a href=\"#Transient\" class=\"headerlink\" title=\"@Transient\"></a>@Transient</h3><pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token attribute atrule\">@Transient</span> <span class=\"token keyword\">var</span> tripViews<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Int</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><strong><code>@Transient</code></strong> ë§¤í¬ë¡œë¥¼ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ í”„ë¡œí¼í‹°ê°€ SwiftDataë¡œ ì“°ì´ëŠ” ê²ƒì„ ë§‰ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ëŒ€ì‹  í•´ë‹¹ í”„ë¡œí¼í‹°ëŠ” <strong>ê¸°ë³¸ê°’</strong> ì„ ê¼­ ê°€ì ¸ì•¼ë§Œ í•©ë‹ˆë‹¤.</p>\n<h2 id=\"Evolving-Schemas\"><a href=\"#Evolving-Schemas\" class=\"headerlink\" title=\"Evolving Schemas\"></a>Evolving Schemas</h2><p>ì•±ì„ ê°œë°œí•˜ê±°ë‚˜ ìƒìš©í™”ë¥¼ í•œ ì´í›„ì—ë„ DBì˜ êµ¬ì¡°ëŠ” ì–¸ì œë“ ì§€ ë°”ë€” ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ë•Œë¬¸ì— Migrationì€ í•„ìˆ˜ì ì¸ ìš”ê±´ì´ì£ .</p>\n<p>SwiftDataë„ <code>VersionedSchema</code>ì™€ <code>SchemaMigrationPlan</code>ì„ í†µí•´ ì´ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token keyword\">enum</span> <span class=\"token class-name\">SampleTripSchemaV1</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">VersionedSchema</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">static</span> <span class=\"token keyword\">var</span> models<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>any <span class=\"token class-name\">PersistentModel</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">Type</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token punctuation\">[</span><span class=\"token class-name\">Trip</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">BucketListItem</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">LivingAccommodation</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">&#125;</span>\n\n  <span class=\"token attribute atrule\">@Model</span>\n  <span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Trip</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">var</span> name<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span>\n    <span class=\"token keyword\">var</span> destination<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span>\n    <span class=\"token keyword\">var</span> start_date<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Date</span>\n    <span class=\"token keyword\">var</span> end_date<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Date</span>\n\n    <span class=\"token keyword\">var</span> bucketList<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">BucketListItem</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">var</span> livingAccommodation<span class=\"token punctuation\">:</span> <span class=\"token class-name\">LivingAccommodation</span><span class=\"token operator\">?</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token keyword\">enum</span> <span class=\"token class-name\">SampleTripSchemaV2</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">VersionedSchema</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">static</span> <span class=\"token keyword\">var</span> models<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>any <span class=\"token class-name\">PersistentModel</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">Type</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token punctuation\">[</span><span class=\"token class-name\">Trip</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">BucketListItem</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">LivingAccommodation</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">&#125;</span>\n\n  <span class=\"token attribute atrule\">@Model</span>\n  <span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Trip</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token attribute atrule\">@Attribute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>unique<span class=\"token punctuation\">)</span> <span class=\"token keyword\">var</span> name<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span>\n    <span class=\"token keyword\">var</span> destination<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span>\n    <span class=\"token attribute atrule\">@Attribute</span><span class=\"token punctuation\">(</span>originalName<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"srart_date\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">var</span> startDate<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Date</span>\n    <span class=\"token attribute atrule\">@Attribute</span><span class=\"token punctuation\">(</span>originalName<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"end_date\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">var</span> endDate<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Date</span>\n\n    <span class=\"token keyword\">var</span> bucketList<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">BucketListItem</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">var</span> livingAccommodation<span class=\"token punctuation\">:</span> <span class=\"token class-name\">LivingAccommodation</span><span class=\"token operator\">?</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><code>SchemaMigrationPlan</code>ìœ¼ë¡œëŠ” ì´ë ‡ê²Œ ë°”ê¾¼ ë°ì´í„°ë“¤ì„ ì–´ë–¤ ìˆœì„œëŒ€ë¡œ ë³€ê²½í• ì§€ ë“±ì˜ ì„¸ë¶€ì ì¸ ì‚¬í•­ë“¤ì„ ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token keyword\">enum</span> <span class=\"token class-name\">SampleTripsMigrationPlan</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">SchemaMigrationPlan</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">static</span> <span class=\"token keyword\">var</span> schemas<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>any <span class=\"token class-name\">VersionedSchema</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">Type</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token punctuation\">[</span><span class=\"token class-name\">SampleTripsSchemaV1</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">SampletripsSchemaV2</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">SampleTripSchemaV3</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">]</span>\n\n  <span class=\"token keyword\">static</span> <span class=\"token keyword\">var</span> stages<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">MigrationStage</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token punctuation\">[</span>migrateV1toV2<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">&#125;</span>\n\n  <span class=\"token keyword\">static</span> <span class=\"token keyword\">let</span> migrateV1toV2 <span class=\"token operator\">=</span> <span class=\"token class-name\">MigrationStage</span><span class=\"token punctuation\">.</span><span class=\"token function\">custom</span><span class=\"token punctuation\">(</span>\n    fromVersion<span class=\"token punctuation\">:</span> <span class=\"token class-name\">SampleTripSchemaV1</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span>\n    toVersion<span class=\"token punctuation\">:</span> <span class=\"token class-name\">SampleTripSchema2</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span>    <span class=\"token punctuation\">,</span>\n    willMigrate<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">&#123;</span> context <span class=\"token keyword\">in</span>\n      <span class=\"token keyword\">let</span> trips <span class=\"token operator\">=</span> <span class=\"token keyword\">try</span><span class=\"token operator\">?</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">FetchDescriptor</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">SampleTripsSchemaV1</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">Trip</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">try</span><span class=\"token operator\">?</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  \n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> didMigrate<span class=\"token punctuation\">:</span> <span class=\"token nil constant\">nil</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"Working-with-your-Data\"><a href=\"#Working-with-your-Data\" class=\"headerlink\" title=\"Working with your Data\"></a>Working with your Data</h2><h3 id=\"Model-Container\"><a href=\"#Model-Container\" class=\"headerlink\" title=\"Model Container\"></a>Model Container</h3><p><strong>Schema</strong> ëŠ” ë‹¨ìˆœíˆ â€œì–´ë–¤ í˜•íƒœë¡œ ì €ì¥ë˜ëŠ” ì§€ì— ëŒ€í•œ ê°€ì´ë“œë¼ì¸â€ ì •ë„ì˜ ì—­í• ì´ê¸° ë•Œë¬¸ì— ì‹¤ì œë¡œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë¬´ì–¸ê°€ë„ ìˆì–´ì•¼ê² ì£ ?</p>\n<p>ê·¸ê²ƒì´ ë°”ë¡œ <strong>Model Container</strong> ì…ë‹ˆë‹¤.</p>\n<p><img src=\"https://i.imgur.com/w4vklF0.png\"></p>\n<p>Model ContainerëŠ” Schemaë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ì œë¡œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤.</p>\n<p>ê·¸ë¦¬ê³  ì´ë ‡ê²Œ ì¸ìŠ¤í„´ìŠ¤í™” ëœ ê° ë°ì´í„°ë“¤(Persistence)ì€ <strong>Model Context</strong> ë¥¼ í†µí•´ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ì£ .</p>\n<p>ê·¸ëŸ¬ë‹ˆê¹Œ <strong>Model Container</strong> ëŠ” <strong>Schemaì™€ Persistence ì‚¬ì´ì˜ ì—°ê²°ëª©</strong> ì—­í• ì„ í•˜ëŠ”ê²ë‹ˆë‹¤.</p>\n<p>Model ContainerëŠ” ì´ëŸ° ì‘ì—…ë“¤ì„ í•©ë‹ˆë‹¤.</p>\n<ul>\n<li>ë²„ì „ ê´€ë¦¬</li>\n<li>Migration</li>\n<li>Graph ë¶„ë¦¬</li>\n</ul>\n<p>Container ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì€ ê°„ë‹¨í•©ë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token class-name\">SwiftData</span>\n\n<span class=\"token keyword\">let</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">try</span> <span class=\"token class-name\">ModelContainer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">for</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">Trip</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span>\n                                         <span class=\"token class-name\">BucketListItem</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span>\n                                         <span class=\"token class-name\">LiveAccommodation</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>ê·¸ë¦¬ê³  ë” ë³µì¡í•œ í˜•íƒœì˜ DBë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆë„ë¡ ì¶”ê°€ì ì¸ <code>Configuration</code>ë„ ì œê³µí•©ë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token class-name\">SwiftData</span>\n\n<span class=\"token keyword\">let</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">try</span> <span class=\"token class-name\">ModelContainer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">for</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">Trip</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">LivingAccommodation</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                                   configuration<span class=\"token punctuation\">:</span> <span class=\"token class-name\">ModelConfiguration</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">:</span> <span class=\"token function\">URL</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"path\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>         <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h4 id=\"Model-Configuration\"><a href=\"#Model-Configuration\" class=\"headerlink\" title=\"Model Configuration\"></a>Model Configuration</h4><pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token keyword\">let</span> fullSchema <span class=\"token operator\">=</span> <span class=\"token class-name\">Schema</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">Trip</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span>\n                         <span class=\"token class-name\">BucketListItem</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span>\n                         <span class=\"token class-name\">LivingAccommodations</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span>\n                         <span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span>\n                         <span class=\"token class-name\">Address</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> trips <span class=\"token operator\">=</span> <span class=\"token class-name\">ModelConfiguration</span><span class=\"token punctuation\">(</span>schema<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Schema</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">Trip</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span>\n                                               <span class=\"token class-name\">BucketListItem</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span>\n                                               <span class=\"token class-name\">LivingAccommodations</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                               url<span class=\"token punctuation\">:</span> <span class=\"token function\">URL</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"/path/to/trip.store\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                               cloudKitContainerIdentifier<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"com.example.trips\"</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> people <span class=\"token operator\">=</span> <span class=\"token class-name\">ModelConfiguration</span><span class=\"token punctuation\">(</span>schema<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Schema</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span>\n                                                <span class=\"token class-name\">Address</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                url<span class=\"token punctuation\">:</span> <span class=\"token function\">URL</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"/path/to/people.store\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                cloudKitContainerIdentifier<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"com.example.people\"</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">try</span> <span class=\"token class-name\">ModelContainer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">for</span><span class=\"token punctuation\">:</span> fullSchema<span class=\"token punctuation\">,</span> trips<span class=\"token punctuation\">,</span> people<span class=\"token punctuation\">)</span>    <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>ModelConfiguration</strong> ì„ í†µí•´ì„œëŠ”</p>\n<ul>\n<li>Schemaì˜ Persistenceë¥¼ ì„¤ëª…í•˜ê±°ë‚˜ (ë©”ëª¨ë¦¬ í˜¹ì€ ë””ìŠ¤í¬)</li>\n<li>ì €ì¥ë˜ëŠ” ìœ„ì¹˜ë¥¼ ì§€ì •í•˜ê±°ë‚˜</li>\n<li>Read-Only ëª¨ë“œë„ ì§€ì›í•˜ê³ </li>\n<li>CloudKitì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° identifierë¥¼ ì œê³µí•©ë‹ˆë‹¤.</li>\n</ul>\n<p>ìœ„ ì˜ˆì‹œì˜ ê²½ìš° <code>trips</code>ì™€ <code>people</code>ì˜ ê·¸ë˜í”„ë¥¼ ì €ì¥ë˜ëŠ” ìœ„ì¹˜ì™€ CloudKitì˜ identifierë¥¼ ë¶„ë¦¬í•´ì„œ ë‹¤ë¥´ê²Œ ì„¤ì •í•´ì£¼ê³  ìˆë„¤ìš”.</p>\n<p>ì´í›„, <strong>ModelContainer</strong> ë¥¼ ìƒì„±í•  ë–„ ë§Œë“¤ì–´ë‘” Schemaì™€ Graphë“¤ì„ í•˜ë‚˜ë¡œ ë¬¶ì–´ ìƒì„±í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<h3 id=\"Model-Context\"><a href=\"#Model-Context\" class=\"headerlink\" title=\"Model Context\"></a>Model Context</h3><p><strong>Model Context</strong> ëŠ” Modelì— ìƒê¸°ëŠ” ë³€í™”ë¥¼ ê´€ì°°í•˜ë‹¤ê°€ íŠ¸ë¦¬ê±°ë˜ëŠ” í–‰ë™ë“¤ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>\n<ol>\n<li>ì—…ë°ì´íŠ¸ë¥¼ ì¶”ì í•˜ê³ , 2. ë°ì´í„°ë¥¼ fetchí•˜ê³ , 3. ë³€ê²½ì ì„ ì €ì¥í•˜ê³ , 4. ë³€ê²½ì ì„ ì·¨ì†Œí•˜ëŠ” ë“±ì˜ ì‘ì—…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>\n</ol>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token class-name\">SwiftData</span>\n\n<span class=\"token keyword\">let</span> context <span class=\"token operator\">=</span> container<span class=\"token punctuation\">.</span>mainContext\n<span class=\"token keyword\">let</span> context <span class=\"token operator\">=</span> <span class=\"token class-name\">ModelContext</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span>  <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>ì´ê²ƒì´ ì–´ë–»ê²Œ ê°€ëŠ¥í•˜ëƒ!? í•˜ë©´, ModelContextëŠ” ì¼ì¢…ì˜ <strong>Snapshot</strong> ì²˜ëŸ¼ ì‘ë™í•©ë‹ˆë‹¤.</p>\n<p>ë³€í™”ê°€ ì¼ì–´ë‚  ë•Œë§ˆë‹¤ Modelì˜ Snapshotì„ ì°ì–´ ê·¸ ë•Œì˜ ìƒíƒœë¥¼ ì €ì¥í•´ë‘ëŠ” ê²ƒì´ì£ .</p>\n<p>ë•ë¶„ì— ì‚­ì œ, ìˆ˜ì •ê³¼ ê°™ì€ ë³€í™”ê°€ ì´ë£¨ì–´ì ¸ë„ <strong>ì–´ë–¤ ì¸ìŠ¤í„´ìŠ¤ê°€ ì‚­ì œëê³ , ìˆ˜ì •ë˜ì—ˆëŠ”ì§€ì— ëŒ€í•œ ì •ë³´</strong> ë¥¼ ë‹´ê³  ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ê·¸ë˜ì„œ ì£¼ì˜í•  ì ì€ ModelContextì˜ ë³€ê²½ì ë“¤ì€ <strong><code>context.save()</code></strong> ë¥¼ í†µí•´ ì €ì¥í•˜ì§€ ì•Šìœ¼ë©´ ì ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>\n<h4 id=\"Undo-with-ModelContext\"><a href=\"#Undo-with-ModelContext\" class=\"headerlink\" title=\"Undo with ModelContext\"></a>Undo with ModelContext</h4><p><strong>Model Container</strong> ì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ <code>undoManager</code>ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì„¸ ì†ê°€ë½ìœ¼ë¡œ ìŠ¤ì™€ì´í”„, í”ë“¤ì–´ì„œ ì…ë ¥ ì·¨ì†Œ ë“± ì‹œìŠ¤í…œì´ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì œìŠ¤ì²˜ë“¤ì„ ìë™ìœ¼ë¡œ ì§€ì›í•œë‹¤ëŠ” ê·¸ëŸ° ì–˜ê¸°ì…ë‹ˆë‹¤..</p>\n<h4 id=\"ModelContext-AutoSave\"><a href=\"#ModelContext-AutoSave\" class=\"headerlink\" title=\"ModelContext AutoSave\"></a>ModelContext AutoSave</h4><pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token punctuation\">.</span><span class=\"token function\">modelContainer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">for</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">Trip</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> isAutosaveEnabled<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>Undoë¿ë§Œ ì•„ë‹ˆë¼ ìë™ ì €ì¥ë„ ì§€ì›í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì•±ì´ ë°±ê·¸ë¼ìš´ë“œ ìƒíƒœë¡œ ê°€ê±°ë‚˜ ì¢…ë£Œë  ë•Œ, í˜¹ì€ ì•±ì´ ì‚¬ìš©ë¨ì— ë”°ë¼ ìë™ì ìœ¼ë¡œ Contextë¥¼ ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.</p>\n<p>Fetchí•œ ê°’ë“¤ì€ ê¸°ì¡´ì— ìˆë˜ <code>SortDescriptor</code>ì™€ ìƒˆë¡œìš´ <code>Predicate</code>, <code>FetchDescriptor</code>ë¥¼ ì‚¬ìš©í•´ ì •ë ¬í•˜ê±°ë‚˜ í•„í„°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<h4 id=\"Predicate\"><a href=\"#Predicate\" class=\"headerlink\" title=\"Predicate\"></a>Predicate</h4><pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token keyword\">let</span> tripPredicate <span class=\"token operator\">=</span> <span class=\"token other-directive property\">#Predicate</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Trip</span><span class=\"token operator\">></span> <span class=\"token punctuation\">&#123;</span> <span class=\"token short-argument\">$0</span><span class=\"token punctuation\">.</span>destination <span class=\"token operator\">==</span> <span class=\"token string-literal\"><span class=\"token string\">\"New York\"</span></span> <span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token keyword\">let</span> tripPredicate <span class=\"token operator\">=</span> <span class=\"token other-directive property\">#Predicate</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Trip</span><span class=\"token operator\">></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token short-argument\">$0</span><span class=\"token punctuation\">.</span>destination <span class=\"token operator\">==</span> <span class=\"token string-literal\"><span class=\"token string\">\"New York\"</span></span> <span class=\"token operator\">&amp;&amp;</span>\n  <span class=\"token short-argument\">$0</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"birthday\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><code>#Predicate</code> ë§¤í¬ë¡œë¥¼ ì‚¬ìš©í•´ ìˆ˜í–‰í•  ìˆ˜ ìˆìœ¼ë©° ê¸°ì¡´ì˜ <code>filter</code>ì™€ ë¹„ìŠ·í•œ ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>\n<p>ê¸°ì¡´ì˜ <code>filter</code>ëŠ” <code>.filter &#123; &#125;.filter &#123; &#125;</code>ì™€ ê°™ì´ ì¤„ì¤„ì´ ì¡°ê±´ì„ ì¶”ê°€í•´ì¤˜ì•¼ í–ˆë˜ ë°˜ë©´, <strong>í•˜ë‚˜ì˜ í´ë¡œì € ë‚´ë¶€ì—ì„œ ëª¨ë“  ì¡°ê±´ë“¤ì„ ê²€ì‚¬</strong> í•  ìˆ˜ ìˆëŠ” ì ì´ íŠ¹ì§•ì…ë‹ˆë‹¤.</p>\n<h4 id=\"Fetch-Descriptor\"><a href=\"#Fetch-Descriptor\" class=\"headerlink\" title=\"Fetch Descriptor\"></a>Fetch Descriptor</h4><pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token keyword\">let</span> descriptor <span class=\"token operator\">=</span> <span class=\"token class-name\">FetchDescriptor</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Trip</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>predicate<span class=\"token punctuation\">:</span> tripPredicate<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> trips <span class=\"token operator\">=</span> <span class=\"token keyword\">try</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>descriptor<span class=\"token punctuation\">)</span>          <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p><code>FetchDescriptor</code>ëŠ” ìœ„ì—ì„œ ì‚´í´ë³¸ <code>Predicate</code>ë¥¼ <code>context</code>ì— ì ìš©ì‹œì¼œì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token keyword\">let</span> descriptor <span class=\"token operator\">=</span> <span class=\"token class-name\">FetchDescriptor</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Trip</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  sortBy<span class=\"token punctuation\">:</span> <span class=\"token class-name\">SortDescriptor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">\\</span><span class=\"token class-name\">Trip</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  predicate<span class=\"token punctuation\">:</span> tripPredicate\n<span class=\"token punctuation\">)</span>      \n\n<span class=\"token keyword\">let</span> trips <span class=\"token operator\">=</span> <span class=\"token keyword\">try</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>descriptor<span class=\"token punctuation\">)</span>           <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>ì´ë ‡ê²Œ <code>SortDescriptor</code>ì™€ ì¡°í•©í•´ì„œ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\">context<span class=\"token punctuation\">.</span><span class=\"token function\">enumerate</span><span class=\"token punctuation\">(</span>descriptor\n                  batchSize<span class=\"token punctuation\">:</span> <span class=\"token number\">10000</span>\n                  allowEscapingMutations<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> trip <span class=\"token keyword\">in</span>\n  <span class=\"token comment\">// operate on trip</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>ì´ì™¸ì—ë„ enumerateë¼ëŠ” í•¨ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>\n<p>batchSizeëŠ” í•œ ë²ˆì— 5000ê°œì˜ ì˜¤ë¸Œì íŠ¸ë“¤ì„ ì²˜ë¦¬í•˜ë„ë¡ ì œí•œë˜ì–´ ìˆì§€ë§Œ, ì´ë¥¼ 10000ê°œë¡œ ëŠ˜ë¦¬ë©´ ë©”ëª¨ë¦¬ì˜ í• ë‹¹ëŸ‰ì„ ëŠ˜ë¦¬ê³ , I&#x2F;O ì‹œê°„ì€ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  (ë©”ëª¨ë¦¬ ì—°ì‚°ì„ ë””ìŠ¤í¬ ì²˜ë¦¬ë³´ë‹¤ ìš°ì„ ì‹œ)</p>\n<p>ë°˜ë©´ ì‚¬ì§„, ì˜í™”ì™€ ê°™ì€ ë°ì´í„°ë“¤ì€ batchSizeë¥¼ ì¤„ì´ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ì¤„ì´ë©´ì„œ I&#x2F;O ì²˜ë¦¬ëŸ‰ì„ ëŠ˜ë¦´ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ì£ . (ë””ìŠ¤í¬ ì²˜ë¦¬ë¥¼ ë©”ëª¨ë¦¬ ì—°ì‚°ë³´ë‹¤ ìš°ì„ ì‹œ)</p>\n<h2 id=\"Modifying-your-Data\"><a href=\"#Modifying-your-Data\" class=\"headerlink\" title=\"Modifying your Data\"></a>Modifying your Data</h2><p>SwiftDataëŠ” CRUD ì‘ì—…ë„ ë„ˆë¬´ ê°„ë‹¨í•©ë‹ˆë‹¤!</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token keyword\">var</span> myTrip <span class=\"token operator\">=</span> <span class=\"token class-name\">Trip</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Birthday Trip\"</span></span><span class=\"token punctuation\">,</span> destination<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"New York\"</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Create</span>\ncontext<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span>myTrip<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Delete</span>\ncontext<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>myTrip<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">try</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>ì°¸ê³  ë¬¸ì„œ</p></blockquote>\n<p><a href=\"https://developer.apple.com/wwdc23/10187\">WWDC23 - Meet SwiftData</a></p>\n<p><a href=\"https://developer.apple.com/wwdc23/10195\">WWDC23 - Model your Schema with SwiftData</a></p>\n<p><a href=\"https://developer.apple.com/wwdc23/10196\">WWDC23 - Dive deeper into SwiftData</a></p>\n","feature":true,"text":"WWDC23 - SwiftDataì˜¤ëŠ˜ì€ SwiftDataë¥¼ ì•Œì•„ë³¼ê±°ì—ìš”Widgetì—ë‹¤ ì¨ë¨¹ì–´ì•¼ë˜ê±°ë“ ìš” ğŸ˜„ ì €ëŠ” ì¼ë‹¨ CoreDataë¥¼ ì¨ë³¸ ì ì´ ì—†ìŠµë‹ˆë‹¤.ì•„ë§ˆ ì¡°ë§Œê°„ ì“¸ ê²ƒ ê°™ê¸°ëŠ” í•œë°.. ì¼ë‹¨ì€ ì—†ì–´ìš”..ì™œ ì•ˆì¼ëƒë©´ìš”.. ìŠ¬ì© ë´ë„ íŒŒì¼ì´ ë„ˆë¬´ ì—¬ê¸°...","link":"","photos":[],"count_time":{"symbolsCount":"8.6k","symbolsTime":"8 mins."},"categories":[{"name":"WWDC23","slug":"WWDC23","count":3,"path":"api/categories/WWDC23.json"}],"tags":[{"name":"Swift","slug":"Swift","count":81,"path":"api/tags/Swift.json"},{"name":"iOS","slug":"iOS","count":81,"path":"api/tags/iOS.json"},{"name":"WWDC23","slug":"WWDC23","count":3,"path":"api/tags/WWDC23.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#WWDC23-SwiftData\"><span class=\"toc-text\">WWDC23 - SwiftData</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Using-the-Model-Macro\"><span class=\"toc-text\">Using the Model Macro</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Attribute\"><span class=\"toc-text\">@Attribute</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Relationship\"><span class=\"toc-text\">@Relationship</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Transient\"><span class=\"toc-text\">@Transient</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Evolving-Schemas\"><span class=\"toc-text\">Evolving Schemas</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Working-with-your-Data\"><span class=\"toc-text\">Working with your Data</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Model-Container\"><span class=\"toc-text\">Model Container</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Model-Configuration\"><span class=\"toc-text\">Model Configuration</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Model-Context\"><span class=\"toc-text\">Model Context</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Undo-with-ModelContext\"><span class=\"toc-text\">Undo with ModelContext</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#ModelContext-AutoSave\"><span class=\"toc-text\">ModelContext AutoSave</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Predicate\"><span class=\"toc-text\">Predicate</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Fetch-Descriptor\"><span class=\"toc-text\">Fetch Descriptor</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Modifying-your-Data\"><span class=\"toc-text\">Modifying your Data</span></a></li></ol></li></ol>","author":{"name":"nomatterjun","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/60438045?v=4","link":"/","description":"ì•ˆë…•í•˜ì„¸ìš” ğŸ‘‹ <br/> ë°”ìœ í˜„ëŒ€ì¸ë“¤ì˜ ì¼ìƒì— <br/> ì‘ì€ ë³€í™”ë¥¼ ì‹¬ê³  ì‹¶ì€ ê°œë°œì <br/> ì´ì°½ì¤€ì…ë‹ˆë‹¤.","socials":{"github":"https://github.com/nomatterjun","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"instagram":{"icon":"/assets/instagram.svg","link":"https://www.instagram.com/nomatter_jun/"}}}},"mapped":true,"prev_post":{},"next_post":{"title":"01)ğŸŠ WWDC23 - What's new in UIKit","uid":"4932fe99e31aa6c7113fa36649ad4bc9","slug":"WWDC23/2023-06-07-WWDC23-01","date":"2023-06-06T15:00:00.000Z","updated":"2023-06-08T08:18:57.712Z","comments":true,"path":"api/articles/WWDC23/2023-06-07-WWDC23-01.json","keywords":null,"cover":"https://i.imgur.com/7ZMZmZ5.jpg","text":"WWDC23 - Whatâ€™s new in UIKitë“œë””ì–´ WWDC23ì˜ ë§‰ì´ ì—´ë ¸ìŠµë‹ˆë‹¤! ë‹¤ë“¤ VisionOS ì™€ Vision Pro ë³´ì…¨ë‚˜ìš”?? ë„ˆë¬´ë„ˆë¬´ ë†€ë¼ì›Œì„œ ë‹¹ì¥ì´ë¼ë„ ê³µë¶€í•˜ê³  ì‹¶ì€ ë§ˆìŒì´ ì»¸ì§€ë§Œ.. ìŠ¤ìœ ì™€ ARKitì„ ëª¨ë¥¸ë‹¤ë©´ ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜...","link":"","photos":[],"count_time":{"symbolsCount":"9.1k","symbolsTime":"8 mins."},"categories":[{"name":"WWDC23","slug":"WWDC23","count":3,"path":"api/categories/WWDC23.json"}],"tags":[{"name":"Swift","slug":"Swift","count":81,"path":"api/tags/Swift.json"},{"name":"iOS","slug":"iOS","count":81,"path":"api/tags/iOS.json"},{"name":"WWDC23","slug":"WWDC23","count":3,"path":"api/tags/WWDC23.json"}],"author":{"name":"nomatterjun","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/60438045?v=4","link":"/","description":"ì•ˆë…•í•˜ì„¸ìš” ğŸ‘‹ <br/> ë°”ìœ í˜„ëŒ€ì¸ë“¤ì˜ ì¼ìƒì— <br/> ì‘ì€ ë³€í™”ë¥¼ ì‹¬ê³  ì‹¶ì€ ê°œë°œì <br/> ì´ì°½ì¤€ì…ë‹ˆë‹¤.","socials":{"github":"https://github.com/nomatterjun","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"instagram":{"icon":"/assets/instagram.svg","link":"https://www.instagram.com/nomatter_jun/"}}}},"feature":true}}